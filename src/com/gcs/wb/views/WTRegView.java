/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

 /*
 * WTRegView.java
 *
 * Created on 10-04-2010, 10:06:26
 */
package com.gcs.wb.views;

import com.gcs.wb.WeighBridgeApp;
import com.gcs.wb.bapi.service.SAPService;
import com.gcs.wb.base.constant.Constants;
import com.gcs.wb.base.util.StringUtil;
import com.gcs.wb.jpa.JPAConnector;
import com.gcs.wb.jpa.JReportConnector;
import com.gcs.wb.jpa.controller.WeightTicketJpaController;
import com.gcs.wb.jpa.entity.Customer;
import com.gcs.wb.jpa.entity.OutboundDelivery;
import com.gcs.wb.jpa.entity.Vehicle;
import com.gcs.wb.jpa.entity.TransportAgentVehicle;
import com.gcs.wb.jpa.entity.Vendor;
import com.gcs.wb.jpa.entity.WeightTicket;
import com.gcs.wb.model.AppConfig;
import com.gcs.wb.controller.WTRegController;
import com.gcs.wb.jpa.JPAConnector;
import com.sap.conn.jco.JCoException;
import java.awt.Color;
import java.math.BigDecimal;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.List;
import java.util.Map;
import java.util.logging.Level;
import java.util.regex.Matcher;
import javax.swing.*;

import org.apache.log4j.Logger;
import org.hibersap.HibersapException;
import org.jdesktop.application.Action;
import org.jdesktop.application.ResourceMap;
import org.jdesktop.application.Task;
import java.awt.Component;

import com.gcs.wb.jpa.entity.Material;
import com.gcs.wb.jpa.entity.OutboundDeliveryDetail;
import com.gcs.wb.jpa.entity.WeightTicketDetail;
import com.gcs.wb.jpa.procedures.WTRegRepository;
import com.gcs.wb.jpa.repositorys.CustomerRepository;
import com.gcs.wb.jpa.repositorys.MaterialRepository;
import com.gcs.wb.jpa.repositorys.OutboundDeliveryRepository;
import com.gcs.wb.jpa.repositorys.TransportAgentVehicleRepository;
import com.gcs.wb.jpa.repositorys.VehicleRepository;
import com.gcs.wb.jpa.repositorys.VendorRepository;
import com.gcs.wb.jpa.repositorys.WeightTicketRepository;
import java.awt.Toolkit;
import java.awt.datatransfer.Clipboard;
import java.awt.datatransfer.StringSelection;
import java.awt.event.KeyEvent;
import java.util.Date;
import javax.persistence.EntityManager;
import javax.persistence.EntityTransaction;

/**
 *
 * @author vunguyent
 */
public class WTRegView extends javax.swing.JInternalFrame {

    /**
     * Creates new form WTRegView
     */
    public String sVendor = "";
    public String sPO = "";
    public double dKldk = 0;
    WTRegRepository wTRegRepository = new WTRegRepository();
    EntityManager entityManager = JPAConnector.getInstance();
    EntityTransaction entityTransaction = entityManager.getTransaction();
    MaterialRepository materialRepository = new MaterialRepository();
    WeightTicketRepository weightTicketRepository = new WeightTicketRepository();
    CustomerRepository customerRepository = new CustomerRepository();
    VendorRepository vendorRepository = new VendorRepository();
    OutboundDeliveryRepository outboundDeliveryRepository = new OutboundDeliveryRepository();
    VehicleRepository vehicleRepository = new VehicleRepository();
    TransportAgentVehicleRepository transportAgentVehicleRepository = new TransportAgentVehicleRepository();
    SAPService sapService = new SAPService();

    WTRegController wTRegController = new WTRegController();

    public WTRegView() {
        initComponents();
        weightTicketList = new ArrayList<WeightTicket>();
        ListWeightTicketsTask t = new ListWeightTicketsTask(WeighBridgeApp.getApplication());
        t.execute();

        cbxHourTo.setSelectedIndex(23);
        txtNMaterial.setVisible(false);
        List<Material> materials = materialRepository.getListMaterial();
        DefaultComboBoxModel result = new DefaultComboBoxModel();
        for (Material material : materials) {
            if (result.getIndexOf(material) < 0 && material.getMatnr() != null
                    && material.getMaktx() != null && !material.getMaktx().isEmpty()) {
                result.addElement(material.getMaktx());
            }
        }
        cbxNMaterial.setModel(result);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        bindingGroup = new org.jdesktop.beansbinding.BindingGroup();
        rbtRegCatGroup = new javax.swing.ButtonGroup();
        newWeightTicket = new com.gcs.wb.jpa.entity.WeightTicket();
        selectedRow = new com.gcs.wb.jpa.entity.WeightTicket();
        outbDel = new com.gcs.wb.jpa.entity.OutboundDelivery();
        jTextField1 = new javax.swing.JTextField();
        buttonGroup1 = new javax.swing.ButtonGroup();
        pnFilter = new javax.swing.JPanel();
        lblDateFrom = new javax.swing.JLabel();
        dpDateFrom = new org.jdesktop.swingx.JXDatePicker();
        lblDateTo = new javax.swing.JLabel();
        dpDateTo = new org.jdesktop.swingx.JXDatePicker();
        lblMaterialType = new javax.swing.JLabel();
        cbxMaterialType = new javax.swing.JComboBox();
        lblHourFrom = new javax.swing.JLabel();
        cbxHourFrom = new javax.swing.JComboBox();
        lblHourTo = new javax.swing.JLabel();
        cbxHourTo = new javax.swing.JComboBox();
        lblCreator = new javax.swing.JLabel();
        txtCreator = new javax.swing.JTextField();
        lblStatus = new javax.swing.JLabel();
        rbtStatusAll = new javax.swing.JRadioButton();
        rbtStatusPosted = new javax.swing.JRadioButton();
        rbtStatusDissolved = new javax.swing.JRadioButton();
        lblDriverName = new javax.swing.JLabel();
        txtDriverName = new javax.swing.JTextField();
        lblPlateNo = new javax.swing.JLabel();
        txtPlateNo = new javax.swing.JTextField();
        btnFind = new javax.swing.JButton();
        spnResult = new javax.swing.JScrollPane();
        tabResults = new org.jdesktop.swingx.JXTable();
        pnPrintControl = new javax.swing.JPanel();
        btnReprint = new javax.swing.JButton();
        pnWTicket = new javax.swing.JPanel();
        pnNLeft = new javax.swing.JPanel();
        lblNDriverName = new javax.swing.JLabel();
        txtNDriverName = new javax.swing.JTextField();
        lblNCMNDBL = new javax.swing.JLabel();
        txtNCMNDBL = new javax.swing.JTextField();
        lblNPlateNo = new javax.swing.JLabel();
        txtNPlateNo = new javax.swing.JTextField();
        lblNTrailerPlate = new javax.swing.JLabel();
        txtNTrailerPlate = new javax.swing.JTextField();
        pnNRight = new javax.swing.JPanel();
        lblNRegCat = new javax.swing.JLabel();
        rbtNInward = new javax.swing.JRadioButton();
        rbtNOutward = new javax.swing.JRadioButton();
        txtNMaterial = new javax.swing.JTextField();
        lblNMaterial = new javax.swing.JLabel();
        cbxNMaterial = new javax.swing.JComboBox();
        lblNWeight = new javax.swing.JLabel();
        txtNWeight = new javax.swing.JFormattedTextField();
        lblNWeightUnit = new javax.swing.JLabel();
        lblNDONum = new javax.swing.JLabel();
        txtNDONum = new javax.swing.JTextField();
        btnCheckDO = new javax.swing.JButton();
        pnControl = new javax.swing.JPanel();
        btnNew = new javax.swing.JButton();
        btnClear = new javax.swing.JButton();
        btnMany = new javax.swing.JButton();
        btnSave = new javax.swing.JButton();
        lblWeightTicketNo = new javax.swing.JLabel();
        txtWeightTicketNo = new javax.swing.JTextField();

        org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(com.gcs.wb.WeighBridgeApp.class).getContext().getResourceMap(WTRegView.class);
        jTextField1.setText(resourceMap.getString("jTextField1.text")); // NOI18N
        jTextField1.setName("jTextField1"); // NOI18N

        setClosable(true);
        setMaximizable(true);
        setResizable(true);
        setTitle(resourceMap.getString("Form.title")); // NOI18N
        setName("Form"); // NOI18N

        initFilter(resourceMap);
        initDateFromLabel(resourceMap);
        initDateFromCalendar();
        initDateToLable(resourceMap);
        initDateToCalendar();
        initMaterialTypeLabel(resourceMap);
        initMaterialTypeBox();
        initHourFromLabel(resourceMap);
        initHourFromBox();
        initHourToLabel(resourceMap);
        initHourToBox();
        initCreatorLabel(resourceMap);
        initCreatorInput();
        initStatusLabel(resourceMap);
        initStatus(resourceMap);
        initDriver(resourceMap);
        initPlate(resourceMap);
        javax.swing.ActionMap actionMap = org.jdesktop.application.Application.getInstance(com.gcs.wb.WeighBridgeApp.class).getContext().getActionMap(WTRegView.class, this);
        initFindButton(resourceMap, actionMap);
        initFilterLayout();

        initResultPanel(resourceMap);
        spnResult.setViewportView(tabResults);

        initPrintControl(resourceMap, actionMap);

        pnWTicket.setName("pnWTicket"); // NOI18N
        pnWTicket.setLayout(new javax.swing.BoxLayout(pnWTicket, javax.swing.BoxLayout.LINE_AXIS));

        pnNLeft.setName("pnNLeft"); // NOI18N

        lblNDriverName.setText(resourceMap.getString("lblNDriverName.text")); // NOI18N
        lblNDriverName.setName("lblNDriverName"); // NOI18N

        txtNDriverName.setName("txtNDriverName"); // NOI18N

        org.jdesktop.beansbinding.Binding binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, newWeightTicket, org.jdesktop.beansbinding.ELProperty.create("${tenTaiXe}"), txtNDriverName, org.jdesktop.beansbinding.BeanProperty.create("text"));
        bindingGroup.addBinding(binding);
        binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, this, org.jdesktop.beansbinding.ELProperty.create("${formEditable}"), txtNDriverName, org.jdesktop.beansbinding.BeanProperty.create("enabled"));
        bindingGroup.addBinding(binding);

        txtNDriverName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtNDriverNameActionPerformed(evt);
            }
        });
        txtNDriverName.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtNDriverNameKeyReleased(evt);
            }
        });

        lblNCMNDBL.setText(resourceMap.getString("lblNCMNDBL.text")); // NOI18N
        lblNCMNDBL.setName("lblNCMNDBL"); // NOI18N

        txtNCMNDBL.setName("txtNCMNDBL"); // NOI18N

        binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, newWeightTicket, org.jdesktop.beansbinding.ELProperty.create("${cmndBl}"), txtNCMNDBL, org.jdesktop.beansbinding.BeanProperty.create("text"));
        bindingGroup.addBinding(binding);
        binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, this, org.jdesktop.beansbinding.ELProperty.create("${formEditable}"), txtNCMNDBL, org.jdesktop.beansbinding.BeanProperty.create("enabled"));
        bindingGroup.addBinding(binding);

        txtNCMNDBL.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtNCMNDBLActionPerformed(evt);
            }
        });
        txtNCMNDBL.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtNCMNDBLKeyReleased(evt);
            }
        });

        lblNPlateNo.setText(resourceMap.getString("lblNPlateNo.text")); // NOI18N
        lblNPlateNo.setName("lblNPlateNo"); // NOI18N

        txtNPlateNo.setName("txtNPlateNo"); // NOI18N

        binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, newWeightTicket, org.jdesktop.beansbinding.ELProperty.create("${soXe}"), txtNPlateNo, org.jdesktop.beansbinding.BeanProperty.create("text"));
        bindingGroup.addBinding(binding);
        binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, this, org.jdesktop.beansbinding.ELProperty.create("${formEditable}"), txtNPlateNo, org.jdesktop.beansbinding.BeanProperty.create("enabled"));
        bindingGroup.addBinding(binding);

        txtNPlateNo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtNPlateNoActionPerformed(evt);
            }
        });
        txtNPlateNo.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtNPlateNoKeyReleased(evt);
            }
        });

        lblNTrailerPlate.setText(resourceMap.getString("lblNTrailerPlate.text")); // NOI18N
        lblNTrailerPlate.setName("lblNTrailerPlate"); // NOI18N

        txtNTrailerPlate.setName("txtNTrailerPlate"); // NOI18N

        binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, newWeightTicket, org.jdesktop.beansbinding.ELProperty.create("${soRomooc}"), txtNTrailerPlate, org.jdesktop.beansbinding.BeanProperty.create("text"));
        bindingGroup.addBinding(binding);
        binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, this, org.jdesktop.beansbinding.ELProperty.create("${formEditable}"), txtNTrailerPlate, org.jdesktop.beansbinding.BeanProperty.create("enabled"));
        bindingGroup.addBinding(binding);

        txtNTrailerPlate.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtNTrailerPlateActionPerformed(evt);
            }
        });
        txtNTrailerPlate.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtNTrailerPlateKeyReleased(evt);
            }
        });

        javax.swing.GroupLayout pnNLeftLayout = new javax.swing.GroupLayout(pnNLeft);
        initLeftLayout(pnNLeftLayout);

        pnWTicket.add(pnNLeft);

        pnNRight.setName("pnNRight"); // NOI18N

        lblNRegCat.setText(resourceMap.getString("lblNRegCat.text")); // NOI18N
        lblNRegCat.setName("lblNRegCat"); // NOI18N

        rbtRegCatGroup.add(rbtNInward);
        rbtNInward.setSelected(true);
        rbtNInward.setText(resourceMap.getString("rbtNInward.text")); // NOI18N
        rbtNInward.setName("rbtNInward"); // NOI18N

        binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, this, org.jdesktop.beansbinding.ELProperty.create("${rbtEnabled}"), rbtNInward, org.jdesktop.beansbinding.BeanProperty.create("enabled"));
        bindingGroup.addBinding(binding);

        rbtNInward.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                rbtNInwardItemStateChanged(evt);
            }
        });

        rbtRegCatGroup.add(rbtNOutward);
        rbtNOutward.setText(resourceMap.getString("rbtNOutward.text")); // NOI18N
        rbtNOutward.setName("rbtNOutward"); // NOI18N

        binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, this, org.jdesktop.beansbinding.ELProperty.create("${rbtEnabled}"), rbtNOutward, org.jdesktop.beansbinding.BeanProperty.create("enabled"));
        bindingGroup.addBinding(binding);

        rbtNOutward.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                rbtNOutwardItemStateChanged(evt);
            }
        });

        txtNMaterial.setName("txtNMaterial"); // NOI18N

        binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, newWeightTicket, org.jdesktop.beansbinding.ELProperty.create("${regItemText}"), txtNMaterial, org.jdesktop.beansbinding.BeanProperty.create("text"));
        bindingGroup.addBinding(binding);
        binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, this, org.jdesktop.beansbinding.ELProperty.create("${formEditable}"), txtNMaterial, org.jdesktop.beansbinding.BeanProperty.create("enabled"));
        bindingGroup.addBinding(binding);

        txtNMaterial.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtNMaterialActionPerformed(evt);
            }
        });
        txtNMaterial.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtNMaterialKeyReleased(evt);
            }
        });

        lblNMaterial.setText(resourceMap.getString("lblNMaterial.text")); // NOI18N
        lblNMaterial.setName("lblNMaterial"); // NOI18N

        cbxNMaterial.setEditable(true);
        cbxNMaterial.setModel(new javax.swing.DefaultComboBoxModel(new String[] { " " }));
        cbxNMaterial.setName("cbxNMaterial"); // NOI18N

        binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, this, org.jdesktop.beansbinding.ELProperty.create("${formEditable}"), cbxNMaterial, org.jdesktop.beansbinding.BeanProperty.create("enabled"));
        bindingGroup.addBinding(binding);

        cbxNMaterial.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                cbxNMaterialItemStateChanged(evt);
            }
        });
        cbxNMaterial.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cbxNMaterialActionPerformed(evt);
            }
        });
        cbxNMaterial.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                cbxNMaterialKeyReleased(evt);
            }
        });

        lblNWeight.setText(resourceMap.getString("lblNWeight.text")); // NOI18N
        lblNWeight.setName("lblNWeight"); // NOI18N

        txtNWeight.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter()));
        txtNWeight.setName("txtNWeight"); // NOI18N

        binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, this, org.jdesktop.beansbinding.ELProperty.create("${formEditable}"), txtNWeight, org.jdesktop.beansbinding.BeanProperty.create("enabled"));
        bindingGroup.addBinding(binding);

        txtNWeight.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtNWeightActionPerformed(evt);
            }
        });
        txtNWeight.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtNWeightKeyReleased(evt);
            }
        });

        lblNWeightUnit.setText(resourceMap.getString("lblNWeightUnit.text")); // NOI18N
        lblNWeightUnit.setName("lblNWeightUnit"); // NOI18N

        initDONumber(resourceMap, actionMap);

        binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, newWeightTicket, org.jdesktop.beansbinding.ELProperty.create("${delivNumb}"), txtNDONum, org.jdesktop.beansbinding.BeanProperty.create("text"));
        bindingGroup.addBinding(binding);
        binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, this, org.jdesktop.beansbinding.ELProperty.create("${formEditable}"), txtNDONum, org.jdesktop.beansbinding.BeanProperty.create("enabled"));
        bindingGroup.addBinding(binding);

        txtNDONum.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtNDONumActionPerformed(evt);
            }
        });
        txtNDONum.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtNDONumKeyReleased(evt);
            }
        });

        initCheckDOButton(resourceMap, actionMap);
        initRightLayout();

        pnWTicket.add(pnNRight);

        pnControl.setName("pnControl"); // NOI18N

        initButtonPanel(resourceMap, actionMap);
        initWeightTicketNo(resourceMap);
        initControlLayout();

        bindingGroup.bind();

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void initDONumber(ResourceMap resourceMap, ActionMap actionMap) {
        lblNDONum.setText(resourceMap.getString("lblNDONum.text")); // NOI18N
        lblNDONum.setName("lblNDONum"); // NOI18N

        txtNDONum.setEditable(false);
        txtNDONum.setAction(actionMap.get("checkDO")); // NOI18N
        txtNDONum.setName("txtNDONum"); // NOI18N
    }

    private void initCheckDOButton(ResourceMap resourceMap, ActionMap actionMap) {
        btnCheckDO.setAction(actionMap.get("checkDO")); // NOI18N
        btnCheckDO.setText(resourceMap.getString("btnCheckDO.text")); // NOI18N
        btnCheckDO.setName("btnCheckDO"); // NOI18N
        btnCheckDO.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCheckDOActionPerformed(evt);
            }
        });
    }

    private void initButtonPanel(ResourceMap resourceMap, ActionMap actionMap) {
        btnNew.setAction(actionMap.get("newRecord")); // NOI18N
        btnNew.setText(resourceMap.getString("btnNew.text")); // NOI18N
        btnNew.setName("btnNew"); // NOI18N

        btnClear.setAction(actionMap.get("clearForm")); // NOI18N
        btnClear.setText(resourceMap.getString("btnClear.text")); // NOI18N
        btnClear.setName("btnClear"); // NOI18N

        btnMany.setText(resourceMap.getString("btnMany.text")); // NOI18N
        btnMany.setEnabled(false);
        btnMany.setName("btnMany"); // NOI18N
        btnMany.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnManyActionPerformed(evt);
            }
        });

        btnSave.setAction(actionMap.get("saveRecord")); // NOI18N
        btnSave.setText(resourceMap.getString("btnSave.text")); // NOI18N
        btnSave.setName("btnSave"); // NOI18N
        btnSave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSaveActionPerformed(evt);
            }
        });
    }

    private void initWeightTicketNo(ResourceMap resourceMap) {
        lblWeightTicketNo.setText(resourceMap.getString("lblWeightTicketNo.text")); // NOI18N
        lblWeightTicketNo.setName("lblWeightTicketNo"); // NOI18N

        txtWeightTicketNo.setEditable(false);
        txtWeightTicketNo.setAutoscrolls(false);
        txtWeightTicketNo.setBorder(BorderFactory.createEtchedBorder());
        txtWeightTicketNo.setName("txtWeightTicketNo"); // NOI18N
    }

    private void initControlLayout() {
        GroupLayout pnControlLayout = new GroupLayout(pnControl);
        pnControl.setLayout(pnControlLayout);
        pnControlLayout.setHorizontalGroup(
                pnControlLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addGroup(pnControlLayout.createSequentialGroup()
                                .addComponent(btnNew)
                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(btnClear)
                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(btnMany)
                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(btnSave)
                                .addGap(82, 82, 82)
                                .addComponent(lblWeightTicketNo)
                                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(txtWeightTicketNo, GroupLayout.PREFERRED_SIZE, 303, GroupLayout.PREFERRED_SIZE)
                                .addGap(127, 127, 127))
        );
        pnControlLayout.setVerticalGroup(
                pnControlLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addGroup(pnControlLayout.createSequentialGroup()
                                .addGap(1, 1, 1)
                                .addGroup(pnControlLayout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                                        .addComponent(btnNew)
                                        .addComponent(btnClear)
                                        .addComponent(btnMany)
                                        .addComponent(btnSave)))
                        .addGroup(pnControlLayout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                                .addComponent(txtWeightTicketNo, GroupLayout.PREFERRED_SIZE, 26, GroupLayout.PREFERRED_SIZE)
                                .addComponent(lblWeightTicketNo))
        );

        GroupLayout layout = new GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                                .addContainerGap()
                                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                        .addComponent(pnFilter, GroupLayout.DEFAULT_SIZE, 909, Short.MAX_VALUE)
                                        .addComponent(spnResult, GroupLayout.Alignment.TRAILING, GroupLayout.DEFAULT_SIZE, 909, Short.MAX_VALUE)
                                        .addComponent(pnPrintControl, GroupLayout.Alignment.TRAILING, GroupLayout.DEFAULT_SIZE, 909, Short.MAX_VALUE)
                                        .addComponent(pnWTicket, GroupLayout.DEFAULT_SIZE, 909, Short.MAX_VALUE)
                                        .addComponent(pnControl, GroupLayout.DEFAULT_SIZE, 909, Short.MAX_VALUE))
                                .addContainerGap())
        );
        layout.setVerticalGroup(
                layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                                .addContainerGap()
                                .addComponent(pnFilter, GroupLayout.PREFERRED_SIZE, 198, GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(spnResult, GroupLayout.PREFERRED_SIZE, 241, GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(pnPrintControl, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(pnWTicket, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(pnControl, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                                .addContainerGap(24, Short.MAX_VALUE))
        );
    }

    private void initRightLayout() {
        GroupLayout pnNRightLayout = new GroupLayout(pnNRight);
        pnNRight.setLayout(pnNRightLayout);
        pnNRightLayout.setHorizontalGroup(
                pnNRightLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addGroup(pnNRightLayout.createSequentialGroup()
                                .addContainerGap()
                                .addGroup(pnNRightLayout.createParallelGroup(GroupLayout.Alignment.TRAILING)
                                        .addComponent(lblNDONum)
                                        .addComponent(lblNWeight)
                                        .addComponent(lblNMaterial)
                                        .addComponent(lblNRegCat))
                                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                                .addGroup(pnNRightLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                        .addGroup(pnNRightLayout.createSequentialGroup()
                                                .addComponent(rbtNInward)
                                                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                                                .addComponent(rbtNOutward)
                                                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                                                .addComponent(txtNMaterial, GroupLayout.PREFERRED_SIZE, 60, GroupLayout.PREFERRED_SIZE))
                                        .addGroup(pnNRightLayout.createSequentialGroup()
                                                .addComponent(txtNWeight, GroupLayout.PREFERRED_SIZE, 108, GroupLayout.PREFERRED_SIZE)
                                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(lblNWeightUnit))
                                        .addGroup(pnNRightLayout.createSequentialGroup()
                                                .addComponent(txtNDONum, GroupLayout.PREFERRED_SIZE, 177, GroupLayout.PREFERRED_SIZE)
                                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(btnCheckDO, GroupLayout.PREFERRED_SIZE, 73, GroupLayout.PREFERRED_SIZE))
                                        .addComponent(cbxNMaterial, 0, 340, Short.MAX_VALUE))
                                .addContainerGap())
        );
        pnNRightLayout.setVerticalGroup(
                pnNRightLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addGroup(pnNRightLayout.createSequentialGroup()
                                .addContainerGap()
                                .addGroup(pnNRightLayout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                                        .addComponent(lblNRegCat)
                                        .addComponent(rbtNInward)
                                        .addComponent(rbtNOutward)
                                        .addComponent(txtNMaterial, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(pnNRightLayout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                                        .addComponent(lblNMaterial)
                                        .addComponent(cbxNMaterial, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(pnNRightLayout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                                        .addComponent(lblNWeight)
                                        .addComponent(txtNWeight, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                                        .addComponent(lblNWeightUnit))
                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(pnNRightLayout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                                        .addComponent(lblNDONum)
                                        .addComponent(txtNDONum, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                                        .addComponent(btnCheckDO))
                                .addContainerGap(GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
    }

    private void initLeftLayout(GroupLayout pnNLeftLayout) {
        pnNLeft.setLayout(pnNLeftLayout);
        pnNLeftLayout.setHorizontalGroup(
                pnNLeftLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addGroup(pnNLeftLayout.createSequentialGroup()
                                .addContainerGap()
                                .addGroup(pnNLeftLayout.createParallelGroup(GroupLayout.Alignment.TRAILING)
                                        .addComponent(lblNTrailerPlate)
                                        .addComponent(lblNDriverName)
                                        .addComponent(lblNCMNDBL)
                                        .addComponent(lblNPlateNo))
                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(pnNLeftLayout.createParallelGroup(GroupLayout.Alignment.LEADING, false)
                                        .addComponent(txtNPlateNo, GroupLayout.PREFERRED_SIZE, 116, GroupLayout.PREFERRED_SIZE)
                                        .addComponent(txtNTrailerPlate, GroupLayout.PREFERRED_SIZE, 116, GroupLayout.PREFERRED_SIZE)
                                        .addComponent(txtNDriverName, GroupLayout.DEFAULT_SIZE, 347, Short.MAX_VALUE)
                                        .addComponent(txtNCMNDBL))
                                .addContainerGap(36, Short.MAX_VALUE))
        );
        pnNLeftLayout.setVerticalGroup(
                pnNLeftLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addGroup(pnNLeftLayout.createSequentialGroup()
                                .addContainerGap()
                                .addGroup(pnNLeftLayout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                                        .addComponent(lblNDriverName)
                                        .addComponent(txtNDriverName, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(pnNLeftLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                        .addComponent(lblNCMNDBL)
                                        .addComponent(txtNCMNDBL, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(pnNLeftLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                        .addComponent(txtNPlateNo, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                                        .addComponent(lblNPlateNo))
                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(pnNLeftLayout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                                        .addComponent(lblNTrailerPlate)
                                        .addComponent(txtNTrailerPlate, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                                .addContainerGap(18, Short.MAX_VALUE))
        );
    }

    private void initPrintControl(ResourceMap resourceMap, ActionMap actionMap) {
        pnPrintControl.setName("pnPrintControl"); // NOI18N
        pnPrintControl.setLayout(new BoxLayout(pnPrintControl, BoxLayout.LINE_AXIS));

        btnReprint.setAction(actionMap.get("reprintRecord")); // NOI18N
        btnReprint.setText(resourceMap.getString("btnReprint.text")); // NOI18N
        btnReprint.setName("btnReprint"); // NOI18N
        pnPrintControl.add(btnReprint);
    }

    private void initResultPanel(ResourceMap resourceMap) {
        spnResult.setBorder(BorderFactory.createTitledBorder(resourceMap.getString("spnResult.border.title"))); // NOI18N
        spnResult.setName("spnResult"); // NOI18N

        tabResults.setModel(new javax.swing.table.DefaultTableModel(
                new Object[][]{
                    {},
                    {},
                    {},
                    {}
                },
                new String[]{}
        ));
        tabResults.setEditable(false);
        tabResults.setName("tabResults"); // NOI18N
        tabResults.setShowGrid(true);
    }

    private void initFilterLayout() {
        GroupLayout pnFilterLayout = new GroupLayout(pnFilter);
        pnFilter.setLayout(pnFilterLayout);
        pnFilterLayout.setHorizontalGroup(
                pnFilterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addGroup(GroupLayout.Alignment.TRAILING, pnFilterLayout.createSequentialGroup()
                                .addGap(33, 33, 33)
                                .addGroup(pnFilterLayout.createParallelGroup(GroupLayout.Alignment.TRAILING, false)
                                        .addComponent(lblHourFrom)
                                        .addComponent(lblDriverName)
                                        .addComponent(lblDateFrom))
                                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                                .addGroup(pnFilterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                        .addComponent(btnFind, GroupLayout.PREFERRED_SIZE, 76, GroupLayout.PREFERRED_SIZE)
                                        .addGroup(pnFilterLayout.createSequentialGroup()
                                                .addGroup(pnFilterLayout.createParallelGroup(GroupLayout.Alignment.LEADING, false)
                                                        .addComponent(dpDateFrom, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                                        .addGroup(pnFilterLayout.createSequentialGroup()
                                                                .addComponent(cbxHourFrom, GroupLayout.PREFERRED_SIZE, 52, GroupLayout.PREFERRED_SIZE)
                                                                .addGap(14, 14, 14)
                                                                .addComponent(lblHourTo)
                                                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                                                .addComponent(cbxHourTo, GroupLayout.PREFERRED_SIZE, 54, GroupLayout.PREFERRED_SIZE))
                                                        .addComponent(txtDriverName))
                                                .addGap(36, 36, 36)
                                                .addGroup(pnFilterLayout.createParallelGroup(GroupLayout.Alignment.TRAILING)
                                                        .addComponent(lblCreator)
                                                        .addComponent(lblPlateNo)
                                                        .addComponent(lblDateTo))
                                                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                                                .addGroup(pnFilterLayout.createParallelGroup(GroupLayout.Alignment.LEADING, false)
                                                        .addComponent(txtPlateNo, GroupLayout.Alignment.TRAILING)
                                                        .addComponent(txtCreator)
                                                        .addComponent(dpDateTo, GroupLayout.DEFAULT_SIZE, 136, Short.MAX_VALUE))
                                                .addGap(46, 46, 46)
                                                .addGroup(pnFilterLayout.createParallelGroup(GroupLayout.Alignment.TRAILING)
                                                        .addComponent(lblMaterialType)
                                                        .addComponent(lblStatus))
                                                .addGroup(pnFilterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                                        .addGroup(pnFilterLayout.createSequentialGroup()
                                                                .addGap(6, 6, 6)
                                                                .addComponent(rbtStatusAll)
                                                                .addGap(18, 18, 18)
                                                                .addComponent(rbtStatusPosted)
                                                                .addGap(18, 18, 18)
                                                                .addComponent(rbtStatusDissolved))
                                                        .addGroup(pnFilterLayout.createSequentialGroup()
                                                                .addGap(9, 9, 9)
                                                                .addComponent(cbxMaterialType, GroupLayout.PREFERRED_SIZE, 292, GroupLayout.PREFERRED_SIZE)))))
                                .addGap(27, 27, 27))
        );
        pnFilterLayout.setVerticalGroup(
                pnFilterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addGroup(pnFilterLayout.createSequentialGroup()
                                .addContainerGap()
                                .addGroup(pnFilterLayout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                                        .addComponent(dpDateTo, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                                        .addComponent(lblDateFrom)
                                        .addComponent(lblDateTo)
                                        .addComponent(dpDateFrom, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                                        .addComponent(cbxMaterialType, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                                        .addComponent(lblMaterialType))
                                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                                .addGroup(pnFilterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                        .addGroup(pnFilterLayout.createSequentialGroup()
                                                .addGroup(pnFilterLayout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                                                        .addComponent(cbxHourFrom, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                                                        .addComponent(cbxHourTo, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                                                        .addComponent(lblHourFrom)
                                                        .addComponent(txtCreator, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                                                        .addComponent(lblCreator)
                                                        .addComponent(lblHourTo))
                                                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                                                .addGroup(pnFilterLayout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                                                        .addComponent(txtDriverName, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                                                        .addComponent(lblDriverName, GroupLayout.PREFERRED_SIZE, 20, GroupLayout.PREFERRED_SIZE)
                                                        .addComponent(txtPlateNo, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                                                        .addComponent(lblPlateNo, GroupLayout.PREFERRED_SIZE, 20, GroupLayout.PREFERRED_SIZE)))
                                        .addGroup(pnFilterLayout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                                                .addComponent(lblStatus)
                                                .addComponent(rbtStatusAll)
                                                .addComponent(rbtStatusPosted, GroupLayout.PREFERRED_SIZE, 30, GroupLayout.PREFERRED_SIZE)
                                                .addComponent(rbtStatusDissolved, GroupLayout.PREFERRED_SIZE, 30, GroupLayout.PREFERRED_SIZE)))
                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(btnFind, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addGap(36, 36, 36))
        );
    }

    private void initFindButton(ResourceMap resourceMap, ActionMap actionMap) {
        btnFind.setAction(actionMap.get("listWeightTickets")); // NOI18N
        btnFind.setText(resourceMap.getString("btnFind.text")); // NOI18N
        btnFind.setName("btnFind"); // NOI18N
    }

    private void initPlate(ResourceMap resourceMap) {
        lblPlateNo.setText(resourceMap.getString("lblPlateNo.text")); // NOI18N
        lblPlateNo.setName("lblPlateNo"); // NOI18N

        txtPlateNo.setName("txtPlateNo"); // NOI18N
    }

    private void initDriver(ResourceMap resourceMap) {
        lblDriverName.setLabelFor(txtCreator);
        lblDriverName.setText(resourceMap.getString("lblDriverName.text")); // NOI18N
        lblDriverName.setName("lblDriverName"); // NOI18N

        txtDriverName.setName("txtDriverName"); // NOI18N
    }

    private void initStatus(ResourceMap resourceMap) {
        buttonGroup1.add(rbtStatusAll);
        rbtStatusAll.setSelected(true);
        rbtStatusAll.setText(resourceMap.getString("rbtStatusAll.text")); // NOI18N
        rbtStatusAll.setName("rbtStatusAll"); // NOI18N

        buttonGroup1.add(rbtStatusPosted);
        rbtStatusPosted.setText(resourceMap.getString("rbtStatusPosted.text")); // NOI18N
        rbtStatusPosted.setName("rbtStatusPosted"); // NOI18N

        buttonGroup1.add(rbtStatusDissolved);
        rbtStatusDissolved.setText(resourceMap.getString("rbtStatusDissolved.text")); // NOI18N
        rbtStatusDissolved.setName("rbtStatusDissolved"); // NOI18N
    }

    private void initStatusLabel(ResourceMap resourceMap) {
        lblStatus.setText(resourceMap.getString("lblStatus.text")); // NOI18N
        lblStatus.setName("lblStatus"); // NOI18N
    }

    private void initCreatorInput() {
        txtCreator.setName("txtCreator"); // NOI18N
    }

    private void initCreatorLabel(ResourceMap resourceMap) {
        lblCreator.setLabelFor(txtCreator);
        lblCreator.setText(resourceMap.getString("lblCreator.text")); // NOI18N
        lblCreator.setName("lblCreator"); // NOI18N
    }

    private void initHourToBox() {
        cbxHourTo.setModel(new DefaultComboBoxModel(new String[]{"00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23"}));
        cbxHourTo.setName("cbxHourTo"); // NOI18N
        cbxHourTo.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                cbxHourToItemStateChanged(evt);
            }
        });
    }

    private void initHourToLabel(ResourceMap resourceMap) {
        lblHourTo.setText(resourceMap.getString("lblHourTo.text")); // NOI18N
        lblHourTo.setName("lblHourTo"); // NOI18N
    }

    private void initHourFromBox() {
        cbxHourFrom.setModel(new DefaultComboBoxModel(new String[]{"00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23"}));
        cbxHourFrom.setName("cbxHourFrom"); // NOI18N
    }

    private void initHourFromLabel(ResourceMap resourceMap) {
        lblHourFrom.setText(resourceMap.getString("lblHourFrom.text")); // NOI18N
        lblHourFrom.setName("lblHourFrom"); // NOI18N
    }

    private void initMaterialTypeBox() {
        cbxMaterialType.setModel(getMatsModel());
        cbxMaterialType.setName("cbxMaterialType"); // NOI18N
        cbxMaterialType.setRenderer(new DefaultListCellRenderer() {
            @Override
            public Component getListCellRendererComponent(
                    JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
                super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
                if (value instanceof Material) {
                    Material mat = (Material) value;
                    setText(mat.getMaktx());
                    setToolTipText(mat.getMatnr());
                }
                return this;
            }
        });
    }

    private void initMaterialTypeLabel(ResourceMap resourceMap) {
        lblMaterialType.setLabelFor(cbxMaterialType);
        lblMaterialType.setText(resourceMap.getString("lblMaterialType.text")); // NOI18N
        lblMaterialType.setName("lblMaterialType"); // NOI18N
    }

    private void initDateToCalendar() {
        dpDateTo.setDate(Calendar.getInstance().getTime());
        dpDateTo.setName("dpDateTo"); // NOI18N
    }

    private void initDateToLable(ResourceMap resourceMap) {
        lblDateTo.setText(resourceMap.getString("lblDateTo.text")); // NOI18N
        lblDateTo.setName("lblDateTo"); // NOI18N
    }

    private void initDateFromCalendar() {
        dpDateFrom.setDate(Calendar.getInstance().getTime());
        dpDateFrom.setName("dpDateFrom"); // NOI18N
        dpDateFrom.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                dpDateFromActionPerformed(evt);
            }
        });
    }

    private void initDateFromLabel(ResourceMap resourceMap) {
        lblDateFrom.setText(resourceMap.getString("lblDateFrom.text")); // NOI18N
        lblDateFrom.setName("lblDateFrom"); // NOI18N
    }

    private void initFilter(ResourceMap resourceMap) {
        pnFilter.setBorder(javax.swing.BorderFactory.createTitledBorder(resourceMap.getString("pnFilter.border.title"))); // NOI18N
        pnFilter.setMinimumSize(new java.awt.Dimension(12, 35));
        pnFilter.setName("pnFilter"); // NOI18N
        pnFilter.setPreferredSize(new java.awt.Dimension(315, 35));
    }

    // <editor-fold defaultstate="collapsed" desc="Event methods">
    private void txtNDriverNameKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtNDriverNameKeyReleased
        setSaveNeeded(isValidated());
}//GEN-LAST:event_txtNDriverNameKeyReleased

    private void txtNCMNDBLKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtNCMNDBLKeyReleased
        setSaveNeeded(isValidated());
}//GEN-LAST:event_txtNCMNDBLKeyReleased

    private void rbtNInwardItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_rbtNInwardItemStateChanged
        setSaveNeeded(isValidated());
}//GEN-LAST:event_rbtNInwardItemStateChanged

    private void rbtNOutwardItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_rbtNOutwardItemStateChanged
        setSaveNeeded(isValidated());
}//GEN-LAST:event_rbtNOutwardItemStateChanged

    private void txtNMaterialKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtNMaterialKeyReleased
        setSaveNeeded(isValidated());
}//GEN-LAST:event_txtNMaterialKeyReleased

    private void txtNWeightKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtNWeightKeyReleased
        setSaveNeeded(isValidated());
}//GEN-LAST:event_txtNWeightKeyReleased

    private void txtNDONumKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtNDONumKeyReleased
        if (WeighBridgeApp.getApplication().isOfflineMode()) {
            return;
        } else {
            if (txtNDONum.getText().trim() == null) {
                return;
            }
            String valDO = txtNDONum.getText().trim();
            //val = StringUtil.paddingZero(val, 10); //+20100112#01 conversion number output
            if (valDO.length() == 0 || (validDO && valDO.length() >= 7 && validDO && valDO.length() <= 10)) {
                if ((evt.isControlDown() && evt.getKeyCode() == KeyEvent.VK_V) || (evt.isShiftDown() && evt.getKeyCode() == KeyEvent.VK_INSERT)) {
                    validDO = false;
                    txtNDONum.setForeground(Color.red);
                } else {
                    txtNDONum.setForeground(Color.black);
                }
            } else {
                validDO = false;
                txtNDONum.setForeground(Color.red);
            }
            if (valDO.length() == 0) {
                validDO = true;
                setRbtEnabled(true);
            } else {
//            setRbtEnabled(false);
            }
            if (valDO.length() != 0) {
                txtNMaterial.setEditable(false);
                txtNWeight.setEditable(false);
            } else {
                txtNMaterial.setEditable(true);
                txtNWeight.setEditable(true);
            }
            //setSaveNeeded(isValidated() && validDO);
//        setSaveNeeded(validDO);
            if (validDO) {
                setSaveNeeded(isValidated());
            }
        }
}//GEN-LAST:event_txtNDONumKeyReleased

    private void txtNPlateNoKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtNPlateNoKeyReleased
        /* if (!evt.isActionKey() && evt.getKeyCode() != KeyEvent.VK_ENTER && evt.getKeyCode() != KeyEvent.VK_ESCAPE) {
        //-{20110119#01 bo qua viec kiem tra hop le khi nhap so xe
        //setSaveNeeded(isValidated());
        //-}20110119#01 bo qua viec kiem tra hop le khi nhap so xe
        }
         * 
         */
        if (!evt.isActionKey() && evt.getKeyCode() != KeyEvent.VK_ENTER) {
            setSaveNeeded(isValidated());
        }
    }//GEN-LAST:event_txtNPlateNoKeyReleased
    private void txtNPlateNoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtNPlateNoActionPerformed
        // TODO add your handling code here:
        setSaveNeeded(isValidated());
    }//GEN-LAST:event_txtNPlateNoActionPerformed

private void txtNDriverNameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtNDriverNameActionPerformed
// TODO add your handling code here:
    setSaveNeeded(isValidated());
}//GEN-LAST:event_txtNDriverNameActionPerformed

private void txtNCMNDBLActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtNCMNDBLActionPerformed
// TODO add your handling code here:
    setSaveNeeded(isValidated());
}//GEN-LAST:event_txtNCMNDBLActionPerformed

private void txtNMaterialActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtNMaterialActionPerformed
// TODO add your handling code here:
    setSaveNeeded(isValidated());
}//GEN-LAST:event_txtNMaterialActionPerformed

private void txtNWeightActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtNWeightActionPerformed
// TODO add your handling code here:
    setSaveNeeded(isValidated());
}//GEN-LAST:event_txtNWeightActionPerformed

private void txtNDONumActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtNDONumActionPerformed
// TODO add your handling code here:
    setSaveNeeded(isValidated());
}//GEN-LAST:event_txtNDONumActionPerformed

private void txtNTrailerPlateActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtNTrailerPlateActionPerformed
// TODO add your handling code here:
}//GEN-LAST:event_txtNTrailerPlateActionPerformed

private void txtNTrailerPlateKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtNTrailerPlateKeyReleased
// TODO add your handling code here:
}//GEN-LAST:event_txtNTrailerPlateKeyReleased

private void cbxHourToItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_cbxHourToItemStateChanged
// TODO add your handling code here:
    if (cbxHourTo.getSelectedIndex() < cbxHourFrom.getSelectedIndex()) {
        cbxHourTo.setSelectedIndex(cbxHourFrom.getSelectedIndex());
    }
}//GEN-LAST:event_cbxHourToItemStateChanged

private void cbxNMaterialActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cbxNMaterialActionPerformed
// TODO add your handling code here:

    txtNMaterial.setText(cbxNMaterial.getSelectedItem().toString());

    setSaveNeeded(isValidated());
}//GEN-LAST:event_cbxNMaterialActionPerformed

private void cbxNMaterialItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_cbxNMaterialItemStateChanged
// TODO add your handling code here:

    txtNMaterial.setText(cbxNMaterial.getSelectedItem().toString());
    setSaveNeeded(isValidated());
}//GEN-LAST:event_cbxNMaterialItemStateChanged

private void cbxNMaterialKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_cbxNMaterialKeyReleased
// TODO add your handling code here:
    txtNMaterial.setText(cbxNMaterial.getSelectedItem().toString());
    setSaveNeeded(isValidated());
}//GEN-LAST:event_cbxNMaterialKeyReleased

private void btnManyActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnManyActionPerformed
// TODO add your handling code here:
    String soDO = JOptionPane.showInputDialog(this.getRootPane(), "Nhp s Delivery Order(DO): ");
    boolean isNumber = false;
    if (soDO == null) {
        isNumber = false;
    } else if (soDO != null || !soDO.equals("")) {
        soDO = soDO.trim();
        for (int i = 0; i < soDO.length(); i++) {
            if (!Character.isDigit(soDO.charAt(i))) {
                isNumber = false;
            } else {
                isNumber = true;
            }
        }
        if (isNumber && soDO.length() >= 8 && soDO.length() <= 10) {
            if (txtNDONum.getText().equals("")) {
                txtNDONum.setText(StringUtil.paddingZero(soDO, 10));

            } else {
                String inputDO = (soDO.length() == 8) ? StringUtil.paddingZero(soDO, 8) : StringUtil.paddingZero(soDO, 10);
                // String inputDO2 = StringUtil.paddingZero(soDO, 8);
                if (txtNDONum.getText().indexOf(inputDO) == -1) {
                    txtNDONum.setText(txtNDONum.getText() + "-" + inputDO);
                } else {
                    JOptionPane.showMessageDialog(this.getRootPane(), resourceMapMsg.getString("msg.duplicateDo"));
                }
            }
        } else {
            JOptionPane.showMessageDialog(this.getRootPane(), resourceMapMsg.getString("msg.falseDo"));
            txtNDONum.setText("");
        }

    }
}//GEN-LAST:event_btnManyActionPerformed

private void btnCheckDOActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCheckDOActionPerformed
// TODO add your handling code here:
    //  txtLicPlate = 

    //if (!CheckTaiTrong( ) ) 
    //    return ; 
    setSaveNeeded(isValidated());
    flag_check = true;
}//GEN-LAST:event_btnCheckDOActionPerformed

    private int iMessage(String messg) {
        int answer = 0;
        answer = JOptionPane.showConfirmDialog(this.getRootPane(), messg,
                JOptionPane.MESSAGE_PROPERTY,
                JOptionPane.YES_NO_OPTION,
                JOptionPane.QUESTION_MESSAGE);
        if (answer == JOptionPane.NO_OPTION) {
            return answer;
        }

        return 1;
    }

private void btnSaveActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSaveActionPerformed
    // if (!CheckTaiTrong( ) ) 
    //        return ; 
}//GEN-LAST:event_btnSaveActionPerformed

private void dpDateFromActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_dpDateFromActionPerformed
// TODO add your handling code here:
}//GEN-LAST:event_dpDateFromActionPerformed
    private DefaultComboBoxModel getMatsModel() {
        DefaultComboBoxModel result = new DefaultComboBoxModel();
        List<Material> materials = materialRepository.getListMaterial();
        Material mat = new Material();
        mat.setMatnr("-2");
        mat.setMaktx("Tt c");
        result.addElement(mat);

        mat = new Material();
        mat.setMatnr("-1");
        mat.setMaktx("Khc");
        result.addElement(mat);
        for (Material material : materials) {
            if (result.getIndexOf(material) < 0) {
                result.addElement(material);
            }
        }

        return result;
    }

    @Action(block = Task.BlockingScope.ACTION)
    public Task listWeightTickets() {

        return new ListWeightTicketsTask(WeighBridgeApp.getApplication());
    }

    @Action(block = Task.BlockingScope.ACTION)
    public Task reprintRecord() {
        if (tabResults.getSelectedRow() == -1) {
            return null;
        } else {
            return new ReprintRecordTask(WeighBridgeApp.getApplication());
        }
    }

    @Action(block = Task.BlockingScope.ACTION)
    public Task printReport() {
        if (tabResults.getModel().getRowCount() == 0) {
            return null;

        } else {
            return new PrintReportTask(org.jdesktop.application.Application.getInstance(com.gcs.wb.WeighBridgeApp.class));
        }
    }

    @Action(block = Task.BlockingScope.ACTION)
    public Task checkDO() {

        // upper & trim  -- tuanna add 28.11.fc2012 
        txtNPlateNo.setText(txtNPlateNo.getText().trim().toUpperCase());
        txtNDriverName.setText(txtNDriverName.getText().trim().toUpperCase());
        txtNCMNDBL.setText(txtNCMNDBL.getText().trim().toUpperCase());
        // End add  

        // Fix bug n hng sai m vt t - 01/04/2013 
        // end fix
        if (WeighBridgeApp.getApplication().isOfflineMode()) {
            return new CheckDOOFFTask(WeighBridgeApp.getApplication());
            //setSaveNeeded(isValidated() && validDO);
            //return null;
        } else {
            String val[] = txtNDONum.getText().trim().split("-");
            for (int i = 0; i < val.length; i++) {
                if (val[i].length() > 0) {
                    //+20100106 convert DO number to SAP format
                    val[i] = StringUtil.paddingZero(val[i], 10);
                    //+20100106 convert DO number to SAP format
                    return new CheckDOTask(WeighBridgeApp.getApplication());
                } else if (val[i].length() == 0) {
                    lblNDONum.setForeground(Color.black);
                    validDO = true;
                    setSaveNeeded(isValidated() && validDO);
                    return null;
                } else {
                    lblNDONum.setForeground(Color.red);
                    validDO = false;
                    setSaveNeeded(isValidated() && validDO);
                }
                continue;
            }
            return null;
        }
    }

    @Action(enabledProperty = "creatable")
    public void newRecord() {
        setFormEditable(true);
        setRbtEnabled(true);
        setCreatable(false);
        setClearable(true);
        setSaveNeeded(isValidated());
        txtWeightTicketNo.setText("");
        //txtRegId.setText("");
        txtNMaterial.setEditable(true);
        cbxNMaterial.setEditable(true);
        txtNWeight.setEditable(true);
        btnMany.setEnabled(true);
        btnCheckDO.setEnabled(true);
        btnSave.setEnabled(false);
        // Nha may FICO Hiep Phuoc only 
        if (WeighBridgeApp.getApplication().getConfig().getwPlant().contentEquals("1411")) {
            rbtNOutward.setSelected(true);
            rbtNInward.setEnabled(false);
        }

    }

    @Action(enabledProperty = "clearable")
    public void clearForm() {
        cleanData();
        setCreatable(true);
        setFormEditable(false);
        setRbtEnabled(false);
        setSaveNeeded(false);
        setClearable(false);
//        txtSodangtai.setText("");
        btnMany.setEnabled(false);
        btnCheckDO.setEnabled(false);
        sVendor = "";
        sPO = "";
        dKldk = 0;

    }

    @Action(enabledProperty = "saveNeeded")
    public Task saveRecord() {
        //+20110119#01
        btnMany.setEnabled(false);
        btnCheckDO.setEnabled(false);
        btnSave.setEnabled(false);

        if (!(isValidated() && validDO)) {
            return null;
        }
        //+20110119#01

        int answer = -1;
        if (txtNDONum.getText().trim().isEmpty() || txtNDONum.getText() == null) {
            answer = JOptionPane.showConfirmDialog(
                    this.getRootPane(),
                    "Bn c mun tip lc lu phiu ng ti khng c s D.O ?",
                    JOptionPane.OPTIONS_PROPERTY,
                    JOptionPane.YES_NO_OPTION,
                    JOptionPane.QUESTION_MESSAGE);
        } else {
            answer = JOptionPane.YES_OPTION;
        }
        if (answer == JOptionPane.YES_OPTION) {
            btnSave.setEnabled(false);
            return new SaveRecordTask(WeighBridgeApp.getApplication());

        } else {
            btnMany.setEnabled(true);
            btnCheckDO.setEnabled(true);

            btnSave.setEnabled(true);
            return null;

        }

    }
    // </editor-fold>
    // <editor-fold defaultstate="collapsed" desc="Task Classes">

    private class ListWeightTicketsTask extends org.jdesktop.application.Task<Object, Void> {

        ListWeightTicketsTask(org.jdesktop.application.Application app) {
            // Runs on the EDT.  Copy GUI state that
            // doInBackground() depends on from parameters
            // to ListWeightTicketsTask fields, here.
            super(app);
        }

        @SuppressWarnings("unchecked")
        @Override
        protected Object doInBackground() {
            try {
                setProgress(0, 0, 4);
                weightTicketList.clear();

                setProgress(1, 0, 4);
                setMessage(resourceMapMsg.getString("msg.getData"));
                AppConfig config = WeighBridgeApp.getApplication().getConfig();
                //Tuanna add to protected data as folowing IT security policy -- 20/05/2013         
                int days = (int) ((dpDateTo.getDate().getTime() - dpDateFrom.getDate().getTime()) / (1000 * 60 * 60 * 24));
//                Date Now = new Date();
//                int days2 = (int) ((Now.getTime() - dpDateTo.getDate().getTime()) / (1000 * 60 * 60 * 24));
//                if ( days >1 || days2 > 1 || 1>1 )   
//                {
//                    JOptionPane.showMessageDialog(rootPane, "Thng bo ! Yu cu truy vn d liu vt khong thi gian cho php."  );
//                      return null; 
//                }                    
                //End add 

                WeightTicketJpaController conWTicket = new WeightTicketJpaController();
                //filter modified by hoangvv
                Object[] select = cbxMaterialType.getSelectedObjects();
                com.gcs.wb.jpa.entity.Material selecttext = (com.gcs.wb.jpa.entity.Material) select[0];
                SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd");
                String fFrom = format.format(dpDateFrom.getDate());
                String fTo = format.format(dpDateTo.getDate());
                System.out.println("dpFrom : " + fFrom + " to " + fTo);

                List<WeightTicket> result = null;
                List<WeightTicket> data = null;
                if (selecttext.getMatnr().equals("-1")) {
                    if (rbtStatusDissolved.isSelected()) {
                        data = conWTicket.findByDateDissolvedNull(fFrom, fTo, txtCreator.getText().trim(), txtDriverName.getText().trim(), txtPlateNo.getText().trim());
                        result = filterHours(data, cbxHourFrom.getSelectedItem().toString(), cbxHourTo.getSelectedItem().toString());
                    } else if (rbtStatusPosted.isSelected()) {
                        data = conWTicket.findByDatePostedNull(fFrom, fTo, txtCreator.getText().trim(), txtDriverName.getText().trim(), txtPlateNo.getText().trim());
                        result = filterHours(data, cbxHourFrom.getSelectedItem().toString(), cbxHourTo.getSelectedItem().toString());
                    } else if (rbtStatusAll.isSelected()) {
                        data = conWTicket.findByDateAllNull(fFrom, fTo, txtCreator.getText().trim(), txtDriverName.getText().trim(), txtPlateNo.getText().trim());
                        result = filterHours(data, cbxHourFrom.getSelectedItem().toString(), cbxHourTo.getSelectedItem().toString());
                    }
                } else if (selecttext.getMatnr().equals("-2")) {
                    if (rbtStatusDissolved.isSelected()) {
                        data = conWTicket.findByDateDissolvedNullAll(fFrom, fTo, txtCreator.getText().trim(), txtDriverName.getText().trim(), txtPlateNo.getText().trim());
                        result = filterHours(data, cbxHourFrom.getSelectedItem().toString(), cbxHourTo.getSelectedItem().toString());
                    } else if (rbtStatusPosted.isSelected()) {
                        data = conWTicket.findByDatePostedNullAll(fFrom, fTo, txtCreator.getText().trim(), txtDriverName.getText().trim(), txtPlateNo.getText().trim());
                        result = filterHours(data, cbxHourFrom.getSelectedItem().toString(), cbxHourTo.getSelectedItem().toString());
                    } else if (rbtStatusAll.isSelected()) {
                        data = conWTicket.findByDateAllNullAll(fFrom, fTo, txtCreator.getText().trim(), txtDriverName.getText().trim(), txtPlateNo.getText().trim());
                        result = filterHours(data, cbxHourFrom.getSelectedItem().toString(), cbxHourTo.getSelectedItem().toString());
                    }
                } else {
                    if (rbtStatusDissolved.isSelected()) {
                        data = conWTicket.findByDateDissolved(fFrom, fTo, txtCreator.getText().trim(), txtDriverName.getText().trim(), selecttext.getMatnr(), txtPlateNo.getText().trim());
                        result = filterHours(data, cbxHourFrom.getSelectedItem().toString(), cbxHourTo.getSelectedItem().toString());
                    } else if (rbtStatusPosted.isSelected()) {
                        data = conWTicket.findByDatePosted(fFrom, fTo, txtCreator.getText().trim(), txtDriverName.getText().trim(), selecttext.getMatnr(), txtPlateNo.getText().trim());
                        result = filterHours(data, cbxHourFrom.getSelectedItem().toString(), cbxHourTo.getSelectedItem().toString());
                    } else if (rbtStatusAll.isSelected()) {
                        data = conWTicket.findByDateAll(fFrom, fTo, txtCreator.getText().trim(), txtDriverName.getText().trim(), selecttext.getMatnr(), txtPlateNo.getText().trim());
                        result = filterHours(data, cbxHourFrom.getSelectedItem().toString(), cbxHourTo.getSelectedItem().toString());
                    }
                }

                setProgress(2, 0, 4);
                setMessage(resourceMapMsg.getString("msg.handleDate"));
                weightTicketList.addAll(result);
                wtData = new Object[weightTicketList.size()][wtCols.length];

                for (int i = 0; i < weightTicketList.size(); i++) {
                    WeightTicket item = weightTicketList.get(i);
                    WeightTicketDetail weightTicketDetail = item.getWeightTicketDetail();
                    wtData[i][0] = item.getSeqDay();
                    wtData[i][1] = item.getDriverName();
                    wtData[i][2] = item.getDriverIdNo();
                    wtData[i][3] = item.getPlateNo();
                    wtData[i][4] = item.getTrailerId();
                    wtData[i][5] = item.getRegType();
                    wtData[i][6] = weightTicketDetail.getRegItemDescription();
                    wtData[i][7] = weightTicketDetail.getRegItemQuantity();
                    wtData[i][8] = weightTicketDetail.getDeliveryOrderNo();
                    wtData[i][9] = item.getCreator();
                    wtData[i][10] = item.getSeqMonth();

                    SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
                    wtData[i][11] = dateFormat.format(item.getCreatedDate());
                    String time = item.getCreatedTime().replaceAll(":", "");
                    String hh = time.substring(0, 2);
                    String mm = time.substring(2, 4);
                    String ss = time.substring(4, 6);
                    wtData[i][12] = hh + ":" + mm + ":" + ss;
                    wtData[i][13] = item.isDissolved();
                    if (item.isPosted()) {
                        wtData[i][14] = true;
                    } else {
                        wtData[i][14] = false;
                    }
                }
                setProgress(3, 0, 4);
                editable = new boolean[wtCols.length];
                for (int i = 0; i < editable.length; i++) {
                    editable[i] = false;
                }
                setProgress(4, 0, 4);
            } catch (Exception ex) {
                failed(ex);
            }
            return null; // return your result
        }

        @Override
        protected void succeeded(Object result) {
            // Runs on the EDT.  Update the GUI based on
            // the result computed by doInBackground().
        }

        @Override
        protected void finished() {
            setMessage(resourceMapMsg.getString("msg.finished"));
            WeighBridgeApp.getApplication().bindJTableModel(tabResults, wtData, wtCols, wtTypes, editable);

            setCreatable(true);
            setFormEditable(false);
//            setRbtEnabled(false);
            setClearable(false);
            setSaveNeeded(false);
            clearForm();
        }

        @Override
        protected void failed(Throwable cause) {
            logger.error(null, cause);
            JOptionPane.showMessageDialog(rootPane, cause.getMessage());
        }
    }

    private class ReprintRecordTask extends org.jdesktop.application.Task<Object, Void> {

        ReprintRecordTask(org.jdesktop.application.Application app) {
            // Runs on the EDT.  Copy GUI state that
            // doInBackground() depends on from parameters
            // to ReprintRecordTask fields, here.
            super(app);
        }

        @Override
        protected Object doInBackground() {
            selectedRow = weightTicketList.get(tabResults.convertRowIndexToModel(tabResults.getSelectedRow()));
            if (selectedRow != null) {
                try {
                    // if (selectedRow.isDissolved() == null)
                    //  {
                    //      selectedRow.setDissolved(false);
                    // }
                    if (!selectedRow.isDissolved()) { //+20100112#01 Khng cho in khi phiu ng ti b hy
                        setMessage(resourceMapMsg.getString("msg.rePrinting"));
                        txtWeightTicketNo.setText(selectedRow.getId() + "");
                        //+ String.format("%03d", selectedRow.getSeqDay())); //+20100303

                        // tuanna add -- copy ticket ID to clipboard. 28.11.2012 
                        StringSelection stringSelection = new StringSelection(txtWeightTicketNo.getText());
                        Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
                        clipboard.setContents(stringSelection, null);

                        // End add. 
                        printWT(selectedRow, true);
                    } else { //+20100112#01  Khng cho in khi phiu ng ti b hy
                        setMessage(resourceMapMsg.getString("msg.ticketDestroy"));
                    } //+20100112#01  Khng cho in khi phiu ng ti b hy
                } catch (Exception ex) {
                    failed(ex);
                }
            }
            return null;  // return your result
        }

        @Override
        protected void failed(Throwable cause) {
            JOptionPane.showMessageDialog(rootPane, cause);
        }

        @Override
        protected void succeeded(Object result) {
            // Runs on the EDT.  Update the GUI based on
            // the result computed by doInBackground().
        }

        @Override
        protected void finished() {
            setMessage(resourceMapMsg.getString("msg.finished"));
        }
    }

    private class PrintReportTask extends org.jdesktop.application.Task<Object, Void> {

        PrintReportTask(org.jdesktop.application.Application app) {
            // Runs on the EDT.  Copy GUI state that
            // doInBackground() depends on from parameters
            // to PrintReportTask fields, here.
            super(app);
        }

        @Override
        protected Object doInBackground() {
            try {
                SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd");
                String kFrom = format.format(dpDateFrom.getDate());
                String kTo = format.format(dpDateTo.getDate());
                Map<String, Object> params = wTRegController.getPrintReport(kFrom, kTo);
                String reportName = wTRegController.getReportName();
                wTRegController.printReport(params, reportName);
            } catch (Exception ex) {
                failed(ex);
            }
            return null;  // return your result
        }

        @Override
        protected void failed(Throwable cause) {
            logger.error(null, cause);
            JOptionPane.showMessageDialog(rootPane, cause.getMessage());
        }
    }

    private class CheckDOTask extends org.jdesktop.application.Task<Object, Void> {

        private OutboundDelivery outb = null;
        private String mode = null;
        private Customer kunnr = null;
        private Customer kunag = null;
        private Vendor lifnr = null;
        private Customer sapKunnr = null;
        private Customer sapKunag = null;
        private Vendor sapLifnr = null;
        private String ship_point = null;

        CheckDOTask(org.jdesktop.application.Application app) {
            super(app);
            outbDel = null;
        }

        @Override
        protected Object doInBackground() {
            String oldKunnr = "";
            String oldSoxe = "";
            String[] listDO = txtNDONum.getText().trim().split("-");
            for (int index = 0; index < listDO.length; index++) {
                setStep(1, resourceMapMsg.getString("msg.checkDOInDB"));
                listDO[index] = StringUtil.paddingZero(listDO[index], 10);
                outb = outboundDeliveryRepository.findByDeliveryOrderNo(listDO[index]);

                setStep(2, resourceMapMsg.getString("checkDOInSap"));
                OutboundDelivery sapOutb = sapService.getOutboundDelivery(listDO[index], true);
                if (sapOutb != null) {
                    fetchCustomerByKunnr(sapOutb);
                    fetchCustomerByKunag(sapOutb);
                    fetchVendor(sapOutb);
                }

                setStep(3, resourceMapMsg.getString("msg.saveDataToDb"));
                startTransaction();
                syncCustomerByKunnr();
                syncCustomerByKunag(sapOutb);
                syncVendor();
                syncOutboundDelivery(listDO[index], sapOutb);
                finishTransaction();

                oldKunnr = checkKunnr(oldKunnr);
                oldSoxe = checkPlate(oldSoxe);

                setMode();

                checkDOInUsed(listDO[index]);
                checkShippingPoint(listDO[index]);

                setMaterialNumber();

                updateWeightTicket();

                setStep(4, null);
                continue;
            }

            return null;
        }

        private void setMaterialNumber() {
            if (validDO && outb != null) {
                mat_numb = outb.getMatnr().trim();
            }
        }

        private void setStep(int step, String msg) {
            if (StringUtil.isNotEmptyString(msg)) {
                setMessage(msg);
            }
            setProgress(step, 1, 4);
        }

        private void updateWeightTicket() {
            if (validDO && outb != null) {
                WeightTicketDetail weightTicketDetail = newWeightTicket.getWeightTicketDetail();
                weightTicketDetail.setItem(outb.getDeliveryItem());
                weightTicketDetail.setMatnrRef(outb.getMatnr());
                weightTicketDetail.setRegItemDescription(outb.getArktx());
                weightTicketDetail.setUnit(outb.getVrkme());
                weightTicketDetail.setKunnr(outb.getKunnr());
                
                txtNMaterial.setText(outb.getArktx());
                cbxNMaterial.setSelectedItem(outb.getArktx());
                BigDecimal regqty = BigDecimal.ZERO;
                List<OutboundDeliveryDetail> detail = new ArrayList<OutboundDeliveryDetail>();
                OutboundDeliveryDetail item = null;
                String[] do_list = txtNDONum.getText().trim().split("-");
                for (int i = 0; i < do_list.length; i++) {
                    String doNum = do_list[i];
                    WeightTicketJpaController conWTicket = new WeightTicketJpaController();
                    try {
                        detail = conWTicket.findByMandtDelivNumb(doNum);
                    } catch (Exception ex) {
                        java.util.logging.Logger.getLogger(WTRegView.class.getName()).log(Level.SEVERE, null, ex);
                    }
                    for (int j = 0; j < detail.size(); j++) {
                        item = detail.get(j);
                        regqty = regqty.add(item.getLfimg());
                    }
                }
                txtNWeight.setValue(regqty.doubleValue());
                outbDel = outb;
            }
        }

        private String getSelectedMode() {
            String selectedMode = "";
            if (rbtNInward.isSelected()) {
                selectedMode = "Nhp";
            }

            if (rbtNOutward.isSelected()) {
                selectedMode = "Xut";
            }

            return selectedMode;
        }

        private void handleUnselectedMode(String selectedMode) {
            if (StringUtil.isEmptyString(selectedMode)) {
                String msg = resourceMapMsg.getString("msg.plzChooseIO");
                setMessage(msg);
                JOptionPane.showMessageDialog(rootPane, msg);
            }
        }

        private void handleDOCheckExist(String doNumber) {
            List wts1 = wTRegRepository.checkDoExist(doNumber, WeighBridgeApp.getApplication().getConfig().getwPlant());

            float fCount = 0;
            if (wts1 != null) {
                fCount = Float.parseFloat(wts1.get(0).toString());
            } else {
                fCount = 2;
            }
            if (fCount > 0) {
                validDO = false;
                outb = null;
                String msg = "D.O \" " + doNumber + " \"  c s dng , vui lng lin h NPP hoc DVKH i m khc. Giao dch li ny ca ngi dng  c h thng lu nht k";
                setMessage(msg);
                JOptionPane.showMessageDialog(rootPane, msg);
            }

        }

        private void handleShippingPointVar(String doNumber, String selectedMode) {
            int klmax = wTRegRepository.getSPVar(WeighBridgeApp.getApplication().getConfig().getWbId().toString(), ship_point, outb.getMatnr().toString().trim());

            Boolean ship = (klmax <= 0) ? false : true;
            if (ship == false) {
                validDO = false;
                outb = null;
                String msg = "D.O \" " + doNumber + " \" khng c " + selectedMode + " hng  im nhn hng ny!, vui lng lin h dch v khch hng Hotline 0919 49 59 69  c h tr. ";
                setMessage(msg);
                JOptionPane.showMessageDialog(rootPane, msg);
            }
        }

        private void checkShippingPoint(String doNumber) {
            if (validDO && outb != null) {
                ship_point = outb.getShipPoint();
                String selectedMode = getSelectedMode();
                handleUnselectedMode(selectedMode);
                handleDOCheckExist(doNumber);
                handleShippingPointVar(doNumber, selectedMode);
            }
        }

        private void checkDOInUsed(String doNumber) {
            if (validDO && outb != null) {
                WeightTicket wt = null;
                String delivNumb = outb.getDeliveryOrderNo();
                wt = weightTicketRepository.findByDeliveryOrderNo(delivNumb);
                String wplant = "";
                wplant = WeighBridgeApp.getApplication().getConfig().getwPlant().toString();
                String sDoType = "LF,LR,NL,ZTLF,ZTLR";
                String Lfart = "";
                try {
                    Lfart = outb.getLfart();

                } catch (Exception ex) {
                }

                if ((sDoType.indexOf(Lfart) >= 0 && outb.getWbstk() == 'X' && outb.getWerks().toString().equalsIgnoreCase(wplant))
                        || (wt != null && !wt.isDissolved())) {
                    validDO = false;
                    outb = null;
                    String msg = "D.O \" " + doNumber + " \"  c dng  " + mode + " hng, vui lng t  kim tra trc khi lin h ng dy nng Dch v khch hng 0919 49 59 69 ";
                    setMessage(msg);
                    JOptionPane.showMessageDialog(rootPane, msg);
                } else {
                    flag_revert = true;
                    outb_number = outb.getDeliveryOrderNo().toString().trim();
                }
            }
        }

        private void setMode() {
            if (validDO && outb != null) {
                if (outb.getLfart().equalsIgnoreCase("LF") || outb.getLfart().equalsIgnoreCase("ZTLF")) {
                    mode = "xut";
                } else {
                    mode = "nhp";
                }
            }
        }

        private String checkPlate(String oldSoxe) {
            if (outb != null
                    && !oldSoxe.equals("")
                    && !oldSoxe.equals(outb.getTraid())) {
                validDO = false;
                String msg = resourceMapMsg.getString("msg.notDuplicateLicensePlate");
                setMessage(msg);
                JOptionPane.showMessageDialog(rootPane, msg);
            } else if (outb != null) {
                oldSoxe = outb.getTraid();
            }
            return oldSoxe;
        }

        private String checkKunnr(String oldKunnr) {
            if (outb != null
                    && !oldKunnr.equals("")
                    && !oldKunnr.equals(outb.getKunnr())) {
                validDO = false;
                String msg = resourceMapMsg.getString("msg.notDuplicateCode");
                setMessage(msg);
                JOptionPane.showMessageDialog(rootPane, msg);
            } else if (outb != null) {
                oldKunnr = outb.getKunnr();
            }
            return oldKunnr;
        }

        private void syncOutboundDelivery(String val, OutboundDelivery sapOutb) {
            if (sapOutb != null && outb == null) {
                entityManager.persist(sapOutb);
                outb = sapOutb;
                validDO = true;
            } else if (sapOutb != null && outb != null) {
                entityManager.merge(sapOutb);
                outb = sapOutb;
                validDO = true;
            } else {
                if (outb != null) {
                    entityManager.remove(outb);
                    outb = null;
                }
                validDO = false;
                String msg = "S D.O \" " + val + " \" khng tn ti!";
                setMessage(msg);
                JOptionPane.showMessageDialog(rootPane, msg);
            }
        }

        private void finishTransaction() {
            entityManager.getTransaction().commit();
            entityManager.clear();
        }

        private void startTransaction() {
            if (!entityManager.getTransaction().isActive()) {
                entityManager.getTransaction().begin();
            }
        }

        private void syncVendor() {
            //Store Vendor Info
            if (sapLifnr != null && lifnr == null) {
                entityManager.persist(sapLifnr);
            } else if (sapLifnr != null && lifnr != null) {
                entityManager.merge(sapLifnr);
            } else if (sapLifnr == null && lifnr != null) {
                entityManager.remove(lifnr);
            }
        }

        private void syncCustomerByKunag(OutboundDelivery sapOutb) {
            //Store Sold to party Info
            if (sapKunag != null && kunag == null && !sapOutb.getKunnr().equalsIgnoreCase(sapOutb.getKunag())) {
                entityManager.persist(sapKunag);
            } else if (sapKunag != null && kunag != null) {
                entityManager.merge(sapKunag);
            } else if (sapKunag == null && kunag != null && !sapOutb.getKunnr().equalsIgnoreCase(sapOutb.getKunag())) {
                entityManager.remove(kunag);
            }
        }

        private void syncCustomerByKunnr() {
            //Store Ship to party Info
            if (sapKunnr != null && kunnr == null) {
                entityManager.persist(sapKunnr);
            } else if (sapKunnr != null && kunnr != null) {
                entityManager.merge(sapKunnr);
            } else if (sapKunnr == null && kunnr != null) {
                entityManager.remove(kunnr);
            }
        }

        private void fetchVendor(OutboundDelivery sapOutb) {
            if (StringUtil.isNotEmptyString(sapOutb.getLifnr())) {
                lifnr = vendorRepository.findByLifnr(sapOutb.getLifnr());
                sapLifnr = sapService.getVendor(sapOutb.getLifnr());
            }
        }

        private void fetchCustomerByKunag(OutboundDelivery sapOutb) {
            if (StringUtil.isNotEmptyString(sapOutb.getKunag())) {
                kunag = customerRepository.findByKunnr(sapOutb.getKunag());
                sapKunag = sapService.getCustomer(sapOutb.getKunag());
            }
        }

        private void fetchCustomerByKunnr(OutboundDelivery sapOutb) {
            if (StringUtil.isNotEmptyString(sapOutb.getKunnr())) {
                kunnr = customerRepository.findByKunnr(sapOutb.getKunnr());
                sapKunnr = sapService.getCustomer(sapOutb.getKunnr());
            }
        }

        @Override
        protected void failed(Throwable cause) {
            validDO = false;
            if (cause instanceof HibersapException && cause.getCause() instanceof JCoException) {
                cause = cause.getCause();
            }
            logger.error(null, cause);
            JOptionPane.showMessageDialog(rootPane, cause.getMessage());
        }

        @Override
        protected void finished() {
        }
    }

    private class CheckDOOFFTask extends org.jdesktop.application.Task<Object, Void> {

        private OutboundDelivery outb = null;
        private String mode = null;
        private String ship_point = null;

        CheckDOOFFTask(org.jdesktop.application.Application app) {
            super(app);
            outbDel = null;
        }

        @Override
        protected Object doInBackground() {
            String oldKunnr = "";
            String oldSoxe = "";
            String[] val = txtNDONum.getText().trim().split("-");
            for (int k = 0; k < val.length; k++) {
                setMessage(resourceMapMsg.getString("msg.checkDOInDb"));
                setProgress(1, 1, 4);
                val[k] = StringUtil.paddingZero(val[k], 10);

                outb = outboundDeliveryRepository.findByDeliveryOrderNo(val[k]);

                if (outb != null) {
                    validDO = true;
                } else {
                    validDO = false;
                    String msg = "S D.O \" " + val[k] + " \" khng tn ti!";
                    setMessage(msg);
                    JOptionPane.showMessageDialog(rootPane, msg);
                }

                //Check kunnr
                if (outb != null
                        && !oldKunnr.equals("")
                        && !oldKunnr.equals(outb.getKunnr())) {
                    validDO = false;
                    String msg = resourceMapMsg.getString("msg.notDuplicateCode");
                    setMessage(msg);
                    JOptionPane.showMessageDialog(rootPane, msg);
                } else if (outb != null) {
                    oldKunnr = outb.getKunnr();
                }

//                Check bien so xe
                if (outb != null
                        && !oldSoxe.equals("")
                        && !oldSoxe.equals(outb.getTraid())) {
                    validDO = false;
                    String msg = resourceMapMsg.getString("msg.notDuplicateLicensePlate");
                    setMessage(msg);
                    JOptionPane.showMessageDialog(rootPane, msg);
                } else if (outb != null) {
                    oldSoxe = outb.getTraid();
                }

                //Set Mode
                if (validDO && outb != null) {
                    /**
                     * At this screen, if enter D.O type LF => Outward mode
                     * Otherwise, Inward mode.
                     */
                    if (outb.getLfart().equalsIgnoreCase("LF") || outb.getLfart().equalsIgnoreCase("ZTLF")) {
                        mode = "xut";
                    } else {
                        mode = "nhp";
                    }
                }

                //Check if D.O was used already or not???
                if (validDO && outb != null) {
                    WeightTicket wt = null;
                    String delivNumb = outb.getDeliveryOrderNo();
                    wt = weightTicketRepository.findByDeliveryOrderNo(delivNumb);
                    String Lfart;
                    try {
                        Lfart = outb.getLfart();

                    } catch (Exception ex) {
                    }

                    if (wt != null && !wt.isDissolved()) {
                        validDO = false;
                        outb = null;
                        String msg = "D.O \" " + val[k] + " \"  c dng  " + mode + " hng, vui lng t  kim tra trc khi lin h ng dy nng Dch v khch hng 0919 49 59 69 ";
                        setMessage(msg);
                        JOptionPane.showMessageDialog(rootPane, msg);
                    } else {
                        flag_revert = true;
                        outb_number = outb.getDeliveryOrderNo().toString().trim();
                    }
                }
//<< 20120712#01 - check shipping point -------

                if (validDO && outb != null) {
                    // Tm thi s dng u ty ninh
                    //ship_point = "(?i).*" + outb.getShipPoint() + "*";
                    // if (WeighBridgeApp.getApplication().getConfig().getShId().toString().matches(ship_point)){
                    //--------- Tun sa ngy 050812  ------------------    
                    ship_point = outb.getShipPoint();
                    String tmpShippoint = WeighBridgeApp.getApplication().getConfig().getShId().toString();
                    String WbID = WeighBridgeApp.getApplication().getConfig().getWbId().toString();

                    String Matname = outb.getArktx().toUpperCase();

                    String sp = ship_point.toString();
                    Boolean ship = true;
                    //--------- Tun sa ngy 04.04.2013  ------------------ 
                    //-- Checking SALE ORDER wrong material - plant 

                    String mymode = "";

                    if (rbtNInward.isSelected() == true) {
                        mymode = "Nhp";
                    } else if (rbtNOutward.isSelected() == true) {
                        mymode = "Xut";
                    } else {
                        mymode = "...";
                    }

                    if (mymode.indexOf("...") >= 0) {
                        String msg = resourceMapMsg.getString("msg.plzChooseIO");
                        setMessage(msg);
                        JOptionPane.showMessageDialog(rootPane, msg);
                    }

                    float fCount = 0;
                    String pDoNumber = val[k];
                    String pWplant = WeighBridgeApp.getApplication().getConfig().getwPlant();
                    List wts1 = wTRegRepository.checkDoExist(pDoNumber, pWplant);
                    try {
                        fCount = Float.parseFloat(wts1.get(0).toString());
                    } catch (Throwable cause) {
                        fCount = 2;
                    }

                    if (fCount > 0) {
                        validDO = false;
                        outb = null;
                        String msg = "D.O \" " + val[k] + " \"  c s dng , vui lng lin h NPP hoc DVKH i m khc. Giao dch li ny ca ngi dng  c h thng lu nht k";
                        setMessage(msg);
                        JOptionPane.showMessageDialog(rootPane, msg);
                    }
                    int klmax = -1;
                    int temp = wTRegRepository.getSPVar(WbID, sp, outb.getMatnr().toString().trim());
                    if (temp > 0) {
                        klmax = temp;
                    }
                    ship = (klmax <= 0) ? false : true;
                    if (ship == false) {
                        validDO = false;
                        outb = null;
                        String msg = "D.O \" " + val[k] + " \" khng c " + mymode + " hng  im nhn hng ny!, vui lng lin h dch v khch hng Hotline 0919 49 59 69  c h tr. ";
                        setMessage(msg);
                        JOptionPane.showMessageDialog(rootPane, msg);
                    }
                }

                //  -------------------------------------------->> 
                //20121217
                if (validDO && outb != null) {
                    mat_numb = outb.getMatnr().trim();
                }
                //end 20121217
                if (validDO && outb != null) {
                    WeightTicketDetail weightTicketDetail = newWeightTicket.getWeightTicketDetail();
                    weightTicketDetail.setItem(outb.getDeliveryItem());
                    weightTicketDetail.setMatnrRef(outb.getMatnr());
                    weightTicketDetail.setRegItemDescription(outb.getArktx());
                    weightTicketDetail.setUnit(outb.getVrkme());
                    weightTicketDetail.setKunnr(outb.getKunnr());
                    
                    txtNMaterial.setText(outb.getArktx());
                    cbxNMaterial.setSelectedItem(outb.getArktx());
                    BigDecimal regqty = BigDecimal.ZERO;
                    List<OutboundDeliveryDetail> detail = new ArrayList<OutboundDeliveryDetail>();
                    OutboundDeliveryDetail item = null;
                    String[] do_list = txtNDONum.getText().trim().split("-");
                    for (int i = 0; i < do_list.length; i++) {
                        String doNum = do_list[i];
                        WeightTicketJpaController conWTicket = new WeightTicketJpaController();
                        try {
                            detail = conWTicket.findByMandtDelivNumb(doNum);
                        } catch (Exception ex) {
                            java.util.logging.Logger.getLogger(WTRegView.class.getName()).log(Level.SEVERE, null, ex);
                        }
                        for (int j = 0; j < detail.size(); j++) {
                            item = detail.get(j);
                            regqty = regqty.add(item.getLfimg());
                        }
                    }
//                if (outb.getFreeQty() != null) {
//                    regqty = outb.getLfimg().add(outb.getFreeQty());
//                } else {
//                    regqty = outb.getLfimg();
//                }
                    txtNWeight.setValue(regqty.doubleValue());
                    outbDel = outb;
                }
                setProgress(4, 1, 4);
                continue;
//                return null;  // return your result
            }
            return null;
        }

        @Override
        protected void failed(Throwable cause) {
            validDO = false;
            if (cause instanceof HibersapException && cause.getCause() instanceof JCoException) {
                cause = cause.getCause();
            }
            logger.error(null, cause);
            JOptionPane.showMessageDialog(rootPane, cause.getMessage());
        }

        @Override
        protected void finished() {
//            if (validDO) {
//                lblDelNum.setForeground(Color.black);
//            } else {
//                lblDelNum.setForeground(Color.red);
//            }
////            setRbtEnabled(!validDO);
//            setSaveNeeded(isValidated() && validDO);
        }
    }

    private class SaveRecordTask extends org.jdesktop.application.Task<Object, Void> {

        SaveRecordTask(org.jdesktop.application.Application app) {
            // Runs on the EDT.  Copy GUI state that
            // doInBackground() depends on from parameters
            // to SaveRecordTask fields, here.

            super(app);
            setSaveNeeded(false);
            setClearable(false);
        }

        @Override
        protected Object doInBackground() {
            WeightTicketJpaController wCon = new WeightTicketJpaController();
            Date now = wCon.getServerDate();

            if (now == null) {
                now = Calendar.getInstance().getTime();

            }
            SimpleDateFormat formatter = new SimpleDateFormat();
            AppConfig sap = WeighBridgeApp.getApplication().getConfig();
            int seqBDay = wCon.getNewSeqBDay() + 1;
            int seqBMonth = wCon.getNewSeqBMonth() + 1;

            //formatter.applyPattern("yyMMddHHmm");
            //String id = formatter.format(now);
            formatter.applyPattern("yyyy");
            //   if (entityManager.
            //String sPlant = "";

            // sPlant = WeighBridgeApp.getApplication().getConfig().getwPlant().toString();
            //Calendar currdate = Calendar.getInstance();
            //String yearplus = "";
            //int y = 0;
            //String nam = id.substring(0, 2);
            //String pWbId = WeighBridgeApp.getApplication().getConfig().getWbId().trim();
            //int iplus = wTRegRepository.getTicketInCre(pWbId);
            //y = Integer.parseInt(nam) + iplus;
            //id = Integer.toString(y) + id.substring(2, id.length());
            int year = Integer.parseInt(formatter.format(now));
            //String sId = id + String.format("%03d", seqBDay);
            //int iCount = wTRegRepository.checkExist(sId);
            //if (iCount > 0) {
            //    seqBDay = seqBDay + iCount;
            //}
//            newWeightTicket.setId(Integer.parseInt(id));
            WeightTicketDetail weightTicketDetail = newWeightTicket.getWeightTicketDetail();
            newWeightTicket.setMandt(sap.getsClient());
            newWeightTicket.setWplant(sap.getwPlant());
            newWeightTicket.setSeqDay(seqBDay);
            newWeightTicket.setSeqMonth(seqBMonth);
            newWeightTicket.setCreatedDate(new java.sql.Date(now.getTime()));
            formatter.applyPattern("HH:mmss");
            newWeightTicket.setCreatedTime(formatter.format(now));
            newWeightTicket.setCreator(WeighBridgeApp.getApplication().getLogin().getUid());
            newWeightTicket.setOfflineMode(WeighBridgeApp.getApplication().isOfflineMode());
            newWeightTicket.setRegType(rbtNInward.isSelected() ? 'I' : 'O');
            weightTicketDetail.setRegItemDescription(txtNMaterial.getText().trim());
            weightTicketDetail.setRegItemQuantity(new BigDecimal(((Number) txtNWeight.getValue()).doubleValue()));
            newWeightTicket.setWbId(sap.getWbId());
            newWeightTicket.setAbbr(abbr);
            newWeightTicket.setPlateNo(txtNPlateNo.getText().trim());
            newWeightTicket.setDriverIdNo(txtNCMNDBL.getText().trim());
            newWeightTicket.setDriverName(txtNDriverName.getText().trim());
//            System.out.println(WeighBridgeApp.getApplication().isOfflineMode());
//            if(WeighBridgeApp.getApplication().isOfflineMode()){
            weightTicketDetail.setDocYear(year);
            newWeightTicket.setPosted(false);
            newWeightTicket.setTrailerId(txtNTrailerPlate.getText().trim());
//            }
            if (weightTicketDetail.getDeliveryOrderNo() != null && weightTicketDetail.getDeliveryOrderNo().trim().isEmpty()) {
                weightTicketDetail.setDeliveryOrderNo(null);
                weightTicketDetail.setItem(null);
                weightTicketDetail.setMatnrRef(null);
                weightTicketDetail.setRegItemDescription(txtNMaterial.getText().trim());
                weightTicketDetail.setUnit(null);
            }
            //+20100113#01
            weightTicketDetail.setKunnr(null);
            if (weightTicketDetail.getDeliveryOrderNo() != null && !weightTicketDetail.getDeliveryOrderNo().trim().isEmpty()) {
                String val = weightTicketDetail.getDeliveryOrderNo().trim();
                val = StringUtil.paddingZero(val, 10);
                weightTicketDetail.setDeliveryOrderNo(val);
                if (outbDel != null) {
                    weightTicketDetail.setKunnr(outbDel.getKunnr());
                }
            }
            //+20100113#01
            //set du lieu cho do detail
            List<OutboundDeliveryDetail> detail = new ArrayList<OutboundDeliveryDetail>();
            OutboundDeliveryDetail item = null;
            if (WeighBridgeApp.getApplication().isOfflineMode() && !txtNDONum.getText().equals("")) {
                weightTicketDetail.setDeliveryOrderNo(txtNDONum.getText());
            } else if (!WeighBridgeApp.getApplication().isOfflineMode()) {
                if (!txtNDONum.getText().equals("")) {
                    String[] do_list = txtNDONum.getText().trim().split("-");
                    for (int i = 0; i < do_list.length; i++) {
                        String doNum = do_list[i];
                        WeightTicketJpaController conWTicket = new WeightTicketJpaController();
                        try {
                            detail = conWTicket.findByMandtDelivNumb(doNum);
                        } catch (Exception ex) {
                            java.util.logging.Logger.getLogger(WTRegView.class.getName()).log(Level.SEVERE, null, ex);
                        }
                        for (int j = 0; j < detail.size(); j++) {
                            item = detail.get(j);
                            String zero = "0";
                            String n = String.valueOf(seqBDay);
                            while (n.length() < 3) {
                                n = zero.concat(n);
                            }
                            //item.setWtId(id + n);
                            if (!entityTransaction.isActive()) {
                                entityTransaction.begin();
                            }
                            entityManager.merge(item);
                            entityTransaction.commit();
                        }
                    }
                }
            }
            if (!WeighBridgeApp.getApplication().getConfig().getModeNormal()) {
                newWeightTicket.setCreator(WeighBridgeApp.getApplication().getCurrent_user());
            }
            setMessage(resourceMapMsg.getString("msg.saveData"));
            try {
                if (!entityTransaction.isActive()) {
                    entityTransaction.begin();
                }
                entityManager.persist(newWeightTicket);
                entityTransaction.commit();
            } catch (Exception ex) {
                if (entityTransaction.isActive()) {
                    entityTransaction.rollback();
                }
                throw ex;
            }

            try {
                setMessage(resourceMapMsg.getString("msg.printing"));
                txtWeightTicketNo.setText(newWeightTicket.getId() + "");
                //+ String.format("%03d", newWeightTicket.getSeqDay())); //+20100303

                // tuanna -  update tai trong vao phieu can 
                //  newWeightTicket.get
                //  con  = null ; 
                printWT(newWeightTicket, false);

                // tuanna add -- copy ticket ID to clipboard. 28.11.2012 
                StringSelection stringSelection = new StringSelection(txtWeightTicketNo.getText());
                Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
                clipboard.setContents(stringSelection, null);
            } catch (Exception ex) {
                btnSave.setEnabled(true);
            }
            ListWeightTicketsTask t = new ListWeightTicketsTask(this.getApplication());
            t.execute();
            return null;  // return your result
        }

        @Override
        protected void failed(Throwable cause) {
            entityManager.getTransaction().rollback();
            setSaveNeeded(true);
        }

        @Override
        protected void finished() {
            setMessage(resourceMapMsg.getString("msg.finished"));
            entityManager.clear();
            cleanData();
            setCreatable(true);
            setFormEditable(false);
            setRbtEnabled(false);
            setClearable(false);
            setSaveNeeded(false);
            if (flag_revert) {
                List<WeightTicket> wt = weightTicketRepository.getListByDeliveryOrderNo(outb_number);
                WeightTicket item = null;
                for (int i = 0; i < wt.size() - 1; i++) {
                    item = wt.get(i);
                    item.setPosted(false);
                    if (!entityManager.getTransaction().isActive()) {
                        entityManager.getTransaction().begin();
                    }
                    entityManager.persist(item);
                    entityManager.getTransaction().commit();
                }
            }
        }
    }
// </editor-fold>
// <editor-fold defaultstate="collapsed" desc="Form's properties">
    private boolean creatable = false;

    public boolean isCreatable() {
        return creatable;
    }

    public void setCreatable(boolean b) {
        boolean old = isCreatable();
        this.creatable = b;
        firePropertyChange("creatable", old, isCreatable());
    }
    private boolean clearable = false;

    public boolean isClearable() {
        return clearable;
    }

    public void setClearable(boolean b) {
        boolean old = isClearable();
        this.clearable = b;
        firePropertyChange("clearable", old, isClearable());
    }
    private boolean saveNeeded = false;

    public boolean isSaveNeeded() {
        return saveNeeded;
    }

    public void setSaveNeeded(boolean b) {
        boolean old = isSaveNeeded();
        this.saveNeeded = b;
        firePropertyChange("saveNeeded", old, isSaveNeeded());
    }

    public boolean isValidated() {
        boolean bDriName = false, bCMNDBL = false, bLicPlate = false,
                bRegCat = false, bRegITxt = false, bRegIQty = false,
                bResult = false;
        bDriName = !(txtNDriverName.getText() == null || txtNDriverName.getText().trim().isEmpty());
        if (bDriName) {
            lblNDriverName.setForeground(Color.black);
        } else {
            lblNDriverName.setForeground(Color.red);
        }
        bCMNDBL = !(txtNCMNDBL.getText() == null || txtNCMNDBL.getText().trim().isEmpty() || txtNCMNDBL.getText().trim().length() > 9);
        if (bCMNDBL) {
            lblNCMNDBL.setForeground(Color.black);
        } else {
            lblNCMNDBL.setForeground(Color.red);
        }
        Matcher m = Constants.WTRegView.patLicPlate.matcher(txtNPlateNo.getText().trim());
        Matcher m_new = Constants.WTRegView.patLicPlatenew.matcher(txtNPlateNo.getText().trim());

        bLicPlate = !(txtNPlateNo.getText().trim().isEmpty());// || !(m.matches() || m_new.matches()));
        // 

        if (bLicPlate) {
            if (txtNDONum.getText().trim().isEmpty() || outbDel == null) {
                bLicPlate = checkLicPlate(null, null);
            } else {
                bLicPlate = checkLicPlate(outbDel.getLfart(), outbDel.getTraid());
            }
        }
        if (bLicPlate && rbtNInward.isSelected()) {
            if (outbDel != null) {
                String soXe_tmp = txtNPlateNo.getText().trim();
                int indexRomooc = -1;
                if (outbDel.getTraid() != null && !outbDel.getTraid().equals("")) {
                    indexRomooc = outbDel.getTraid().indexOf("|");
                    if (indexRomooc >= 0) {
                        soXe_tmp = soXe_tmp.concat("|").concat(txtNTrailerPlate.getText().trim());
                    }
                }
                if (!soXe_tmp.equals(outbDel.getTraid().trim())) {
                    if (outbDel.getTraid() != null
                            && indexRomooc >= 0
                            && indexRomooc != (outbDel.getTraid().trim().length() - 1)
                            && txtNTrailerPlate.getText().trim().equals("")) {
                        JOptionPane.showMessageDialog(rootPane,
                                resourceMapMsg.getString("msg.plzInputRomoc"));
                    } else {
                        JOptionPane.showMessageDialog(rootPane,
                                resourceMapMsg.getString("msg.errorLicensePlate"));
                    }
                }

            }
        }
        if (bLicPlate) {
            lblNPlateNo.setForeground(Color.black);
        } else {
            lblNPlateNo.setForeground(Color.red);
        }
        bRegCat = rbtNInward.isSelected() || rbtNOutward.isSelected();
        if (bRegCat) {
            lblNRegCat.setForeground(Color.black);
        } else {
            lblNRegCat.setForeground(Color.red);
        }
        bRegITxt = !(txtNMaterial.getText() == null || txtNMaterial.getText().trim().isEmpty());
        if (bRegITxt) {
            lblNMaterial.setForeground(Color.black);
        } else {
            lblNMaterial.setForeground(Color.red);
        }
        bRegIQty = !(txtNWeight.getText().isEmpty() || Double.parseDouble(txtNWeight.getText()) <= 0d);
        if (bRegIQty) {
            lblNWeight.setForeground(Color.black);
        } else {
            lblNWeight.setForeground(Color.red);
        }

        bResult = bDriName && bCMNDBL && bLicPlate && bRegCat && bRegITxt && bRegIQty;
        setFormValid(bResult);
//        return bResult && validDO;
        boolean r;
        if (txtNDONum.getText() != null || !txtNDONum.getText().equals("")) {
            r = bResult && validDO && flag_check;
        } else {
            r = bResult && validDO;
        }
        return r;
    }

    private void printWT(WeightTicket wt, boolean reprint) throws Exception {
        try {
            wTRegController.printRegWT(wt, reprint);
        } catch (Exception ex) {
            logger.error(null, ex);
            throw ex;
        }
    }

    private boolean checkLicPlate(String lfart, String traid) {
        boolean result = false;
        //if (lfart != null && ( lfart.equalsIgnoreCase("LF") || lfart.equalsIgnoreCase("ZTLF") ) ) {
        if (lfart != null && traid != null && (lfart.equalsIgnoreCase("ZTLF") || lfart.equalsIgnoreCase("NL"))) {
            String txt = traid;
            String doLicPlate = null;
            int idx1 = txt.indexOf("|");
            int idx2 = txt.indexOf("\\");
            if (idx1 >= 0 || idx2 >= 0) {
                int splitPos = idx1 < 0 ? idx2 : idx1;
                int bIdx = splitPos - 8;
                int eIdx = -1;
                if (bIdx < 0) {
                    bIdx = 0;
                }
                doLicPlate = txt.substring(bIdx, splitPos);
                splitPos++;
                eIdx = splitPos + 8;
                if (eIdx >= txt.length()) {
                    eIdx = txt.length() - 1;
                }
                if (splitPos < eIdx) {
//                            outb.setSoRomooc(txt.substring(splitPos, eIdx));
                }
            } else {
                int countSpace = 0;
                int[] pos = new int[3];
                char[] chars = txt.toCharArray();
                for (int x = 0; x < chars.length; x++) {
                    char c = chars[x];
                    if (c == ' ') {
                        pos[countSpace] = x;
                        countSpace++;
                    }
                }
                if (countSpace == 3) {
                    int splitPos = pos[1];
                    int bIdx = splitPos - 8;
                    int eIdx = -1;
                    if (bIdx < 0) {
                        bIdx = 0;
                    }
                    doLicPlate = txt.substring(bIdx, splitPos);
                    splitPos++;
                    eIdx = splitPos + 8;
                    if (eIdx >= txt.length()) {
                        eIdx = txt.length() - 1;
                    }
                    if (splitPos < eIdx) {
//                        outb.setSoRomooc(txt.substring(splitPos, eIdx));
                    }
                } else {
                    doLicPlate = traid;
                }
            }
            if (doLicPlate.equalsIgnoreCase(newWeightTicket.getPlateNo())) {
                result = true;
            } else {
                result = false;
                JOptionPane.showMessageDialog(rootPane, "S xe \"" + newWeightTicket.getPlateNo()
                        + "\" khng khp vi s c ng k trong D.O: " + doLicPlate);
            }
        } else if (newWeightTicket != null) {
            //Do local check for entered Truck's License Plate
            Vehicle vehicle = vehicleRepository.findByPlateNo(txtNPlateNo.getText().trim());

            if (vehicle == null) {
                result = false;
                JOptionPane.showMessageDialog(rootPane, "S xe \" " + txtNPlateNo.getText().trim()
                        + " \" cha c ng k  xut/nhp hng!");
            } else {
                result = true;
                if (vehicle.isProhibit()) {
                    result = false;
                    JOptionPane.showMessageDialog(rootPane, "S xe \" " + txtNPlateNo.getText().trim()
                            + " \" ang b cm xut/nhp hng!");
                }

                List<TransportAgentVehicle> transportAgentVehicles = transportAgentVehicleRepository.findByVehicleId(vehicle.getId());
                if (transportAgentVehicles != null && transportAgentVehicles.size() == 1) {
                    abbr = transportAgentVehicles.get(0).getTransportAgent().getAbbr();
                }
            }
        }
        return result;
    }

    private void cleanData() {
        newWeightTicket = new com.gcs.wb.jpa.entity.WeightTicket();
        outbDel = null;
        txtNDriverName.setText("");
        txtNCMNDBL.setText("");
        txtNPlateNo.setText("");
        txtNTrailerPlate.setText("");
        rbtRegCatGroup.clearSelection();
        rbtNInward.setEnabled(true);
        rbtNOutward.setEnabled(true);
        txtNMaterial.setText("");
        cbxNMaterial.setSelectedItem("");
        txtNWeight.setValue(null);
        txtNDONum.setText("");

        lblNDriverName.setForeground(Color.black);
        lblNCMNDBL.setForeground(Color.black);
        lblNPlateNo.setForeground(Color.black);
        lblNTrailerPlate.setForeground(Color.black);
        lblNRegCat.setForeground(Color.black);
        lblNMaterial.setForeground(Color.black);
        lblNWeight.setForeground(Color.black);
        lblNDONum.setForeground(Color.black);
        validDO = true;
    }

    private List<WeightTicket> filterHours(List<WeightTicket> data, String timefrom, String timeto) {
        List<WeightTicket> result = new ArrayList<WeightTicket>();
        int n1 = Integer.parseInt(timefrom);
        double n2 = Integer.parseInt(timeto) + 0.99;
        if (!data.isEmpty()) {
            for (int i = 0; i < data.size(); i++) {
                WeightTicket item = null;
                item = data.get(i);

                String ct = item.getCreatedTime();
//                System.out.println(ct);
                Character c0 = ct.charAt(0);
                Character c1 = ct.charAt(1);
                String ct1 = c0.toString().concat(c1.toString());
                int cTime = Integer.parseInt(ct1);
//                System.out.println(cTime);
                if (cTime >= n1 && cTime <= n2) {
                    if (WeighBridgeApp.getApplication().getConfig().getModeNormal()) {
                        result.add(item);
                    } else {
                        //filter sloc
                        String[] sloc_item = WeighBridgeApp.getApplication().getSloc().split("-");
                        if (sloc_item.length > 0) {
                            for (int j = 0; j < sloc_item.length; j++) {
                                String current_sloc = sloc_item[j].toString().trim();
                                if (item.getLgort() == null) {
                                    result.add(item);
                                    break;
                                } else if (item.getLgort().equals(current_sloc)) {
                                    result.add(item);
                                }
                            }
                        }

                    }

                }
            }
        }
        return result;
    }
    // </editor-fold>
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnCheckDO;
    private javax.swing.JButton btnClear;
    private javax.swing.JButton btnFind;
    private javax.swing.JButton btnMany;
    private javax.swing.JButton btnNew;
    private javax.swing.JButton btnReprint;
    private javax.swing.JButton btnSave;
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.JComboBox cbxHourFrom;
    private javax.swing.JComboBox cbxHourTo;
    private javax.swing.JComboBox cbxMaterialType;
    private javax.swing.JComboBox cbxNMaterial;
    private org.jdesktop.swingx.JXDatePicker dpDateFrom;
    private org.jdesktop.swingx.JXDatePicker dpDateTo;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JLabel lblCreator;
    private javax.swing.JLabel lblDateFrom;
    private javax.swing.JLabel lblDateTo;
    private javax.swing.JLabel lblDriverName;
    private javax.swing.JLabel lblHourFrom;
    private javax.swing.JLabel lblHourTo;
    private javax.swing.JLabel lblMaterialType;
    private javax.swing.JLabel lblNCMNDBL;
    private javax.swing.JLabel lblNDONum;
    private javax.swing.JLabel lblNDriverName;
    private javax.swing.JLabel lblNMaterial;
    private javax.swing.JLabel lblNPlateNo;
    private javax.swing.JLabel lblNRegCat;
    private javax.swing.JLabel lblNTrailerPlate;
    private javax.swing.JLabel lblNWeight;
    private javax.swing.JLabel lblNWeightUnit;
    private javax.swing.JLabel lblPlateNo;
    private javax.swing.JLabel lblStatus;
    private javax.swing.JLabel lblWeightTicketNo;
    private com.gcs.wb.jpa.entity.WeightTicket newWeightTicket;
    private com.gcs.wb.jpa.entity.OutboundDelivery outbDel;
    private javax.swing.JPanel pnControl;
    private javax.swing.JPanel pnFilter;
    private javax.swing.JPanel pnNLeft;
    private javax.swing.JPanel pnNRight;
    private javax.swing.JPanel pnPrintControl;
    private javax.swing.JPanel pnWTicket;
    private javax.swing.JRadioButton rbtNInward;
    private javax.swing.JRadioButton rbtNOutward;
    private javax.swing.ButtonGroup rbtRegCatGroup;
    private javax.swing.JRadioButton rbtStatusAll;
    private javax.swing.JRadioButton rbtStatusDissolved;
    private javax.swing.JRadioButton rbtStatusPosted;
    private com.gcs.wb.jpa.entity.WeightTicket selectedRow;
    private javax.swing.JScrollPane spnResult;
    private org.jdesktop.swingx.JXTable tabResults;
    private javax.swing.JTextField txtCreator;
    private javax.swing.JTextField txtDriverName;
    private javax.swing.JTextField txtNCMNDBL;
    private javax.swing.JTextField txtNDONum;
    private javax.swing.JTextField txtNDriverName;
    private javax.swing.JTextField txtNMaterial;
    private javax.swing.JTextField txtNPlateNo;
    private javax.swing.JTextField txtNTrailerPlate;
    private javax.swing.JFormattedTextField txtNWeight;
    private javax.swing.JTextField txtPlateNo;
    private javax.swing.JTextField txtWeightTicketNo;
    private org.jdesktop.beansbinding.BindingGroup bindingGroup;
    // End of variables declaration//GEN-END:variables
    private static Logger logger = Logger.getLogger(WTRegView.class);
    private java.util.List<WeightTicket> weightTicketList;
    private boolean validDO = true;
    private boolean formValid;
    private String abbr;
    private boolean flag_revert = false;
    private String outb_number = null;
    private boolean flag_check = false;
    private String mat_numb = null;

    /**
     * Get the value of formValid
     *
     * @return the value of formValid
     */
    public boolean isFormValid() {
        return formValid;
    }

    /**
     * Set the value of formValid
     *
     * @param formValid new value of formValid
     */
    public void setFormValid(boolean formValid) {
        boolean oldFormValid = this.formValid;
        this.formValid = formValid;
        firePropertyChange(Constants.WTRegView.PROP_FORMVALID, oldFormValid, formValid);
    }
    private boolean formEditable;

    /**
     * Get the value of formEditable
     *
     * @return the value of formEditable
     */
    public boolean isFormEditable() {
        return formEditable;
    }

    /**
     * Set the value of formEditable
     *
     * @param formEditable new value of formEditable
     */
    public void setFormEditable(boolean formEditable) {
        boolean oldFormEditable = this.formEditable;
        this.formEditable = formEditable;
        firePropertyChange(Constants.WTRegView.PROP_FORMEDITABLE, oldFormEditable, formEditable);
    }
    private boolean rbtEnabled;

    /**
     * Get the value of rbtEnabled
     *
     * @return the value of rbtEnabled
     */
    public boolean isRbtEnabled() {
        return rbtEnabled;
    }

    /**
     * Set the value of rbtEnabled
     *
     * @param rbtEnabled new value of rbtEnabled
     */
    public void setRbtEnabled(boolean rbtEnabled) {
        boolean oldRbtEnabled = this.rbtEnabled;
        this.rbtEnabled = rbtEnabled;
        firePropertyChange(Constants.WTRegView.PROP_RBTENABLED, oldRbtEnabled, rbtEnabled);
    }
    private boolean[] editable = null;
    Object[][] wtData = null;
    Object[] wtCols = new String[]{
        "S ti",
        "Tn ti x",
        "CMND/BL",
        "B.S Xe",
        "B.S Rmoc",
        "Nhp/Xut (I/O)",
        "Loi hng ng k",
        "Trng lng ng k",
        "S D.O",
        "Ngi to",
        "S Phiu trong thng",
        "Ngy",
        "Gi",
        "Hy",
        "SAP Posted"};
    Class[] wtTypes = new Class[]{
        Integer.class,
        String.class,
        String.class,
        String.class,
        String.class,
        Character.class,
        String.class,
        BigDecimal.class,
        String.class,
        String.class,
        Integer.class,
        Date.class,
        String.class,
        Boolean.class,
        Boolean.class};
    public org.jdesktop.application.ResourceMap resourceMapMsg = org.jdesktop.application.Application.getInstance(com.gcs.wb.WeighBridgeApp.class).getContext().getResourceMap(WTRegView.class);
}
